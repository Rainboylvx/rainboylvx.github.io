<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=cache-control content="max-age=0"><meta http-equiv=cache-control content="no-cache"><meta http-equiv=expires content="0"><meta http-equiv=expires content="Tue, 01 Jan 1980 1:00:00 GMT"><meta http-equiv=pragma content="no-cache"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png }><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#1b1b1b"><meta name=description content="MongoDB ç»ƒä¹  2"><script>(function(){const e=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");document.documentElement.setAttribute("data-theme",e)})()</script><title>MongoDB ç»ƒä¹  2 | Rainboy's Blog</title><style>:root{--background:#ffffff}@media(prefers-color-scheme:dark){:root{--background:#1b1b1b}}html{background-color:var(--background)}body{background-color:var(--background)}</style><link rel=stylesheet type=text/css href=/style.min.20930b28bccdfeef9630b3bf7e743593efc6984312602656fd25572182cb9c89.css media=all><link rel=stylesheet href=/grid.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css integrity="sha512-fHwaWebuwA7NSF5Qg/af4UeDx9XqUpYpOGgubo3yWu+b2IQR4UeQwbb42Ti7gVAjNtVoI/I9TEoYeu9omwcC6g==" crossorigin=anonymous referrerpolicy=no-referrer></head><body><nav><ul class=menu><li><a tabindex=-1 class=menu-link href=/><u>H</u>ome</a></li><li><a tabindex=-1 class=menu-link href=/tags><u>T</u>ags</a></li><li><span style=cursor:pointer id=theme-switcher class=menu-link type=button>ğŸŒ™</span></li></ul></nav><div id=single-header><h1>MongoDB ç»ƒä¹  2</h1><div id=single-meta><span class=datesub>2025-09-09</span>
<span id=tags>&nbsp;&nbsp;
<span><a href=https://hugo-dead-simple.netlify.com/tags/mongodb/>#mongodb</a>
</span>&nbsp; <span><a href=https://hugo-dead-simple.netlify.com/tags/exercises/>#exercises</a>
</span>&nbsp;</span></div></div><aside class="hidden lg:block toc" id=tableOfContentContainer><nav id=TableOfContents><ul><li><a href=#21>21</a></li><li><a href=#22>22</a></li><li><a href=#23>23</a></li><li><a href=#24>24</a></li><li><a href=#2526>25,26</a></li><li><a href=#27>27</a></li><li><a href=#28>28</a></li><li><a href=#29>29</a></li><li><a href=#30>30</a></li><li><a href=#31>31</a></li><li><a href=#32>32</a></li><li><a href=#33>33</a></li><li><a href=#34>34</a></li><li><a href=#35>35</a></li><li><a href=#36>36</a></li><li><a href=#37>37</a></li><li><a href=#38>38</a></li><li><a href=#39>39</a></li><li><a href=#40>40</a></li></ul></nav></aside><main><h2 id=21>21</h2><p>Write a MongoDB query to find the restaurant Id, name, borough and cuisine for those restaurants which prepared dish except &lsquo;American&rsquo; and &lsquo;Chinees&rsquo; or restaurant&rsquo;s name begins with letter &lsquo;Wil&rsquo;.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>({</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>    <span class=nx>$or</span> <span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>      <span class=p>{</span><span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=sr>/^Wil/</span><span class=p>},</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>      <span class=p>{</span><span class=s2>&#34;cuisine&#34;</span> <span class=o>:</span> <span class=p>{</span> <span class=nx>$nin</span> <span class=o>:</span><span class=p>[</span><span class=s2>&#34;American &#34;</span><span class=p>,</span><span class=s2>&#34;Chinees&#34;</span><span class=p>]</span> <span class=p>}}</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>  <span class=p>})</span>
</span></span></code></pre></div><p>è¿™ä¸¤ä¸ªå†™æ³•æ˜¯ä¸€æ ·çš„</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln> 1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=p>{</span><span class=nx>$or</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>  <span class=p>{</span><span class=nx>name</span><span class=o>:</span> <span class=sr>/^Wil/</span><span class=p>},</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>  <span class=p>{</span><span class=s2>&#34;$and&#34;</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>       <span class=p>{</span><span class=s2>&#34;cuisine&#34;</span> <span class=o>:</span> <span class=p>{</span><span class=nx>$ne</span> <span class=o>:</span><span class=s2>&#34;American &#34;</span><span class=p>}},</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>       <span class=p>{</span><span class=s2>&#34;cuisine&#34;</span> <span class=o>:</span> <span class=p>{</span><span class=nx>$ne</span> <span class=o>:</span><span class=s2>&#34;Chinees&#34;</span><span class=p>}}</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>   <span class=p>]}</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=p>]}</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=p>,{</span><span class=s2>&#34;restaurant_id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span><span class=s2>&#34;name&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span><span class=s2>&#34;borough&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span><span class=s2>&#34;cuisine&#34;</span> <span class=o>:</span><span class=mi>1</span><span class=p>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=p>);</span>
</span></span></code></pre></div><h2 id=22>22</h2><ol start=22><li>Write a MongoDB query to find the restaurant Id, name, and grades for those restaurants which achieved a grade of &ldquo;A&rdquo; and scored 11 on an ISODate &ldquo;2014-08-11T00:00:00Z&rdquo; among many of survey dates.</li></ol><p>è¾¾åˆ°äº† grade A ä¸” scored 11. é¦–å…ˆ,æˆ‘ä»¬è¦ç†è§£è¿™é‡Œçš„æ„æ€åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€?</p><p>æœ‰ä¸‰ä¸ªæ¡ä»¶:</p><ul><li>æ—¶é—´: ISODate &ldquo;2014-08-11T00:00:00Z</li><li>åˆ†å€¼: 11</li><li>grade: A</li></ul><p>è¿™é‡Œçš„å…³é”®åœ¨äº,æ•°ç»„<code>grades</code>å…¶ä¸­çš„ä¸€æ¡æ»¡è¶³è¿™3ä¸ªæ¡ä»¶.é‚£ä¹ˆé‡Œè¿™é‡Œè¦ç”¨åˆ°çš„<code>$elemMatch</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>({</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>    <span class=nx>grades</span><span class=o>:</span><span class=p>{</span> <span class=nx>$elemMatch</span> <span class=o>:</span> <span class=p>{</span> <span class=nx>grade</span><span class=o>:</span><span class=s1>&#39;A&#39;</span><span class=p>,</span><span class=nx>date</span><span class=o>:</span><span class=nx>ISODate</span><span class=p>(</span><span class=s2>&#34;2014-08-11T00:00:00Z&#34;</span><span class=p>),</span> <span class=nx>scored</span><span class=o>:</span> <span class=mi>11</span><span class=p>}}</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>  <span class=p>})</span>
</span></span></code></pre></div><p>ä½†æ˜¯ç»™å‡ºçš„ç­”æ¡ˆæ˜¯,ç†è§£æˆ‘å†™åœ¨æ³¨é‡Šé‡Œ</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>    <span class=p>{</span> <span class=c1>// è¿™é‡Œæ˜¯and
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=c1></span>      <span class=s2>&#34;grades.date&#34;</span><span class=o>:</span> <span class=nx>ISODate</span><span class=p>(</span><span class=s2>&#34;2014-08-11T00:00:00Z&#34;</span><span class=p>),</span> <span class=c1>// è¿™é‡Œåªè¦æœ‰ä¸€ä¸ªæ•°ç»„çš„å…ƒç´ æˆç«‹
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=c1></span>      <span class=s2>&#34;grades.grade&#34;</span><span class=o>:</span><span class=s2>&#34;A&#34;</span> <span class=p>,</span> <span class=c1>// è¿™é‡Œåªè¦æœ‰ä¸€ä¸ªæ•°ç»„çš„å…ƒç´ æˆç«‹
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=c1></span>      <span class=s2>&#34;grades.score&#34;</span> <span class=o>:</span> <span class=mi>11</span><span class=c1>// è¿™é‡Œåªè¦æœ‰ä¸€ä¸ªæ•°ç»„çš„å…ƒç´ æˆç«‹
</span></span></span><span class=line><span class=ln>6</span><span class=cl><span class=c1></span>    <span class=p>},</span>
</span></span><span class=line><span class=ln>7</span><span class=cl>      <span class=p>{</span><span class=s2>&#34;restaurant_id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span><span class=s2>&#34;name&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span><span class=s2>&#34;grades&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>}</span>
</span></span><span class=line><span class=ln>8</span><span class=cl>    <span class=p>);</span>
</span></span></code></pre></div><p>è¿™é‡Œæ€ä¹ˆç”¨æ•°å­¦æè¿°: è®¾é›†åˆAä¸º<code>A = [{},{},{},{}]</code>, æ»¡è¶³æ¡ä»¶<span class=katex><span class=katex-mathml><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>âˆˆ</mo><mi>A</mi><mo>âˆ§</mo><mi>b</mi><mo>âˆˆ</mo><mi>A</mi><mo>âˆ§</mo><mi>c</mi><mo>âˆˆ</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">a \in A \land b \in A \land c \in A</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.5782em;vertical-align:-.0391em></span><span class="mord mathnormal">a</span><span class=mspace style=margin-right:.2778em></span><span class=mrel>âˆˆ</span><span class=mspace style=margin-right:.2778em></span></span><span class=base><span class=strut style=height:.6833em></span><span class="mord mathnormal">A</span><span class=mspace style=margin-right:.2222em></span><span class=mbin>âˆ§</span><span class=mspace style=margin-right:.2222em></span></span><span class=base><span class=strut style=height:.7335em;vertical-align:-.0391em></span><span class="mord mathnormal">b</span><span class=mspace style=margin-right:.2778em></span><span class=mrel>âˆˆ</span><span class=mspace style=margin-right:.2778em></span></span><span class=base><span class=strut style=height:.6833em></span><span class="mord mathnormal">A</span><span class=mspace style=margin-right:.2222em></span><span class=mbin>âˆ§</span><span class=mspace style=margin-right:.2222em></span></span><span class=base><span class=strut style=height:.5782em;vertical-align:-.0391em></span><span class="mord mathnormal">c</span><span class=mspace style=margin-right:.2778em></span><span class=mrel>âˆˆ</span><span class=mspace style=margin-right:.2778em></span></span><span class=base><span class=strut style=height:.6833em></span><span class="mord mathnormal">A</span></span></span></span></p><h2 id=23>23</h2><p>Write a MongoDB query to find the restaurant Id, name and grades for those restaurants where the 2nd element of grades array contains a grade of &ldquo;A&rdquo; and score 9 on an ISODate &ldquo;2014-08-11T00:00:00Z&rdquo;.</p><p>arrayElemAtï¼ˆå¦‚æœä½ éœ€è¦æ˜ç¡®é€‰æ‹©æ•°ç»„ä¸­çš„ç‰¹å®šå…ƒç´ ï¼‰</p><p>å¦‚æœä½ æ˜ç¡®åªæƒ³è¦æŸ¥è¯¢æ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼ŒelemMatch ä¸èƒ½ç›´æ¥åšè¿™ä»¶äº‹ã€‚ä¸è¿‡ï¼Œä½ å¯ä»¥ç»“åˆ $arrayElemAt æ¥é€‰æ‹©æ•°ç»„ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ è¿›è¡Œæ¡ä»¶åŒ¹é…ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>collection</span><span class=p>.</span><span class=nx>find</span><span class=p>({</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>  <span class=s2>&#34;$expr&#34;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>    <span class=s2>&#34;$eq&#34;</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>      <span class=p>{</span> <span class=s2>&#34;$arrayElemAt&#34;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;$grades&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>]</span> <span class=p>},</span>  <span class=c1>// è·å–ç¬¬äºŒä¸ªå…ƒç´ 
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=c1></span>      <span class=p>{</span> <span class=s2>&#34;grade&#34;</span><span class=o>:</span> <span class=s2>&#34;A&#34;</span><span class=p>,</span> <span class=s2>&#34;score&#34;</span><span class=o>:</span> <span class=mi>9</span><span class=p>,</span> <span class=s2>&#34;date&#34;</span><span class=o>:</span> <span class=nx>ISODate</span><span class=p>(</span><span class=s2>&#34;2014-08-11T00:00:00Z&#34;</span><span class=p>)</span> <span class=p>}</span>  <span class=c1>// æ¡ä»¶
</span></span></span><span class=line><span class=ln>6</span><span class=cl><span class=c1></span>    <span class=p>]</span>
</span></span><span class=line><span class=ln>7</span><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=ln>8</span><span class=cl><span class=p>})</span>
</span></span></code></pre></div><p>é‚£ä¹ˆè¿˜æ˜¯å®˜æ–¹ç»™çš„ç­”æ¡ˆæ¯”è¾ƒç®€å•:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>                      <span class=p>{</span> <span class=s2>&#34;grades.1.date&#34;</span><span class=o>:</span> <span class=nx>ISODate</span><span class=p>(</span><span class=s2>&#34;2014-08-11T00:00:00Z&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>                        <span class=s2>&#34;grades.1.grade&#34;</span><span class=o>:</span><span class=s2>&#34;A&#34;</span> <span class=p>,</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>                        <span class=s2>&#34;grades.1.score&#34;</span> <span class=o>:</span> <span class=mi>9</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>                      <span class=p>},</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>                       <span class=p>{</span><span class=s2>&#34;restaurant_id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span><span class=s2>&#34;name&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span><span class=s2>&#34;grades&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>}</span>
</span></span><span class=line><span class=ln>7</span><span class=cl>                   <span class=p>);</span>
</span></span></code></pre></div><h2 id=24>24</h2><p>Write a MongoDB query to find the restaurant Id, name, address and geographical location for those restaurants where 2nd element of coord array contains a value which is more than 42 and upto 52.</p><p>æ²¡æœ‰äº‰è®®</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>                      <span class=p>{</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>                        <span class=s2>&#34;address.coord.1&#34;</span><span class=o>:</span> <span class=p>{</span><span class=nx>$gt</span> <span class=o>:</span> <span class=mi>42</span><span class=p>,</span> <span class=nx>$lte</span> <span class=o>:</span> <span class=mi>52</span><span class=p>}</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>                      <span class=p>},</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>                        <span class=p>{</span><span class=s2>&#34;restaurant_id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span><span class=s2>&#34;name&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span><span class=s2>&#34;address&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span><span class=s2>&#34;coord&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>}</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>                   <span class=p>);</span>
</span></span></code></pre></div><h2 id=2526>25,26</h2><blockquote><ul><li>Write a MongoDB query to arrange the name of the restaurants in ascending order along with all the columns.</li><li>Write a MongoDB query to arrange the name of the restaurants in descending along with all the columns.</li></ul></blockquote><p>å°±æ˜¯æ’åºè€Œå·²</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>().</span><span class=nx>sort</span><span class=p>({</span><span class=s2>&#34;name&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>});</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>().</span><span class=nx>sort</span><span class=p>(</span> <span class=p>{</span><span class=s2>&#34;name&#34;</span><span class=o>:-</span><span class=mi>1</span><span class=p>});</span>
</span></span></code></pre></div><h2 id=27>27</h2><blockquote><p>Write a MongoDB query to arranged the name of the cuisine in ascending order and for that same cuisine borough should be in descending order.</p></blockquote><p>è¿˜æ˜¯æ’åº,ä¸è¿‡åŒæ—¶è¦æ’åºä¸¤ä¸ªå…ƒç´ </p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>().</span><span class=nx>sort</span><span class=p>(</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>                           <span class=p>{</span><span class=s2>&#34;cuisine&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span><span class=s2>&#34;borough&#34;</span> <span class=o>:</span> <span class=o>-</span><span class=mi>1</span><span class=p>,}</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>                          <span class=p>);</span>
</span></span></code></pre></div><h2 id=28>28</h2><blockquote><p>Write a MongoDB query to know whether all the addresses contains the street or not.</p></blockquote><p>æŸ¥è¯¢å…ƒç´ çš„å­˜åœ¨æ€§</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span> <span class=p>{</span><span class=s2>&#34;address.street&#34;</span> <span class=o>:</span> <span class=p>{</span> <span class=nx>$exists</span> <span class=o>:</span> <span class=kc>true</span> <span class=p>}</span> <span class=p>}</span> <span class=p>);</span>
</span></span></code></pre></div><h2 id=29>29</h2><blockquote><p>Write a MongoDB query which will select all documents in the restaurants collection where the coord field value is Double.</p></blockquote><p>æŸ¥è¯¢å…ƒç´ çš„ç±»å‹</p><p>å¯¹äº field ä¸ºæ•°ç»„çš„æ–‡æ¡£ï¼Œ<code>$type</code> è¿”å›çš„æ–‡æ¡£ä¸­è‡³å°‘æœ‰ä¸€ä¸ªæ•°ç»„å…ƒç´ ä¸ä¼ é€’ç»™ <code>$type</code> çš„ç±»å‹åŒ¹é…ã€‚</p><p>å¯¹ $type: &ldquo;array&rdquo; çš„æŸ¥è¯¢ä¼šè¿”å›å­—æ®µæœ¬èº«ä¸ºæ•°ç»„çš„æ–‡æ¡£ã€‚</p><p><a href=https://www.mongodb.com/zh-cn/docs/manual/reference/operator/query/type/ target=_blank rel="noreferrer nofollow">$type â€” MongoDB æ‰‹å†Œ v8.0</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span> <span class=p>{</span><span class=s2>&#34;address.coord&#34;</span> <span class=o>:</span> <span class=p>{</span><span class=nx>$type</span> <span class=o>:</span> <span class=mi>1</span><span class=p>}</span> <span class=p>});</span>
</span></span></code></pre></div><h2 id=30>30</h2><blockquote><p>Write a MongoDB query which will select the restaurant Id, name and grades for those restaurants which returns 0 as a remainder after dividing the score by 7.</p></blockquote><p>è¿™é‡Œç”¨åˆ°äº† <a href=https://www.mongodb.com/zh-cn/docs/manual/reference/operator/query/mod/ target=_blank rel="noreferrer nofollow">$mod - MongoDB æ‰‹å†Œ v8.0</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>                      <span class=p>{</span><span class=s2>&#34;grades.score&#34;</span> <span class=o>:</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>                         <span class=p>{</span><span class=nx>$mod</span> <span class=o>:</span> <span class=p>[</span><span class=mi>7</span><span class=p>,</span><span class=mi>0</span><span class=p>]}</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>                      <span class=p>},</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>                         <span class=p>{</span><span class=s2>&#34;restaurant_id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span><span class=s2>&#34;name&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span><span class=s2>&#34;grades&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>}</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>                    <span class=p>);</span>
</span></span></code></pre></div><h2 id=31>31</h2><blockquote><p>Write a MongoDB query to find the restaurant name, borough, longitude and attitude and cuisine for those restaurants which contains &lsquo;mon&rsquo; as three letters somewhere in its name.</p></blockquote><p>æ­£åˆ™æŸ¥è¯¢</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln> 1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>                   <span class=p>{</span> <span class=nx>name</span> <span class=o>:</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>                     <span class=p>{</span> <span class=nx>$regex</span> <span class=o>:</span> <span class=s2>&#34;mon.*&#34;</span><span class=p>,</span> <span class=nx>$options</span><span class=o>:</span> <span class=s2>&#34;i&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>                   <span class=p>},</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>                       <span class=p>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>                         <span class=s2>&#34;name&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>                         <span class=s2>&#34;borough&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>                         <span class=s2>&#34;address.coord&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>                         <span class=s2>&#34;cuisine&#34;</span> <span class=o>:</span><span class=mi>1</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>                        <span class=p>}</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>                   <span class=p>);</span>
</span></span></code></pre></div><h2 id=32>32</h2><blockquote><p>Write a MongoDB query to find the restaurant name, borough, longitude and latitude and cuisine for those restaurants which contain &lsquo;Mad&rsquo; as first three letters of its name.</p></blockquote><p>æ­£åˆ™æŸ¥è¯¢</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln> 1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>                   <span class=p>{</span> <span class=nx>name</span> <span class=o>:</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>                     <span class=p>{</span> <span class=nx>$regex</span> <span class=o>:</span> <span class=sr>/^Mad/i</span><span class=p>,</span> <span class=p>}</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>                   <span class=p>},</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>                       <span class=p>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>                         <span class=s2>&#34;name&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>                         <span class=s2>&#34;borough&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>                         <span class=s2>&#34;address.coord&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>                         <span class=s2>&#34;cuisine&#34;</span> <span class=o>:</span><span class=mi>1</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>                        <span class=p>}</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>                   <span class=p>);</span>
</span></span></code></pre></div><h2 id=33>33</h2><blockquote><p>Write a MongoDB query to find the restaurants that have at least one grade with a score of less than 5.</p></blockquote><p>æ•°ç»„æŸ¥è¯¢</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>({</span> <span class=s2>&#34;grades.score&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$lt</span><span class=o>:</span> <span class=mi>5</span> <span class=p>}</span> <span class=p>})</span>
</span></span></code></pre></div><h2 id=34>34</h2><blockquote><p>Write a MongoDB query to find the restaurants that have at least one grade with a score of less than 5 and that are located in the borough of Manhattan.</p></blockquote><p>æ€ä¹ˆå˜ç®€å•äº†?</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>({</span> <span class=s2>&#34;grades.score&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$lt</span><span class=o>:</span> <span class=mi>5</span> <span class=p>},</span> <span class=s2>&#34;borough&#34;</span><span class=o>:</span> <span class=s2>&#34;Manhattan&#34;</span> <span class=p>})</span>
</span></span></code></pre></div><h2 id=35>35</h2><blockquote><p>Write a MongoDB query to find the restaurants that have at least one grade with a score of less than 5 and that are located in the borough of Manhattan or Brooklyn.</p></blockquote><p>è¿˜æ˜¯ç®€å•</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln> 1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>({</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>  <span class=nx>$and</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>      <span class=nx>$or</span><span class=o>:</span> <span class=p>[</span> <span class=c1>// å¯ä»¥ç”¨$in
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=c1></span>        <span class=p>{</span><span class=nx>borough</span><span class=o>:</span> <span class=s2>&#34;Manhattan&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>        <span class=p>{</span><span class=nx>borough</span><span class=o>:</span> <span class=s2>&#34;Brooklyn&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>      <span class=p>]</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>      <span class=s2>&#34;grades.score&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$lt</span><span class=o>:</span> <span class=mi>5</span> <span class=p>}</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=p>})</span>
</span></span></code></pre></div><h2 id=36>36</h2><blockquote><p>Write a MongoDB query to find the restaurants that have at least one grade with a score of less than 5 and that are located in the borough of Manhattan or Brooklyn, and their cuisine is not American.</p></blockquote><p>å®˜æ–¹ç»™çš„è¿™ä¸ªç­”æ¡ˆ,å¯ä»¥ä¸ç”¨æœ€å¤–å±‚çš„<code>$and</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>({</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>  <span class=nx>$and</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=p>{</span> <span class=nx>$or</span><span class=o>:</span> <span class=p>[{</span> <span class=nx>borough</span><span class=o>:</span> <span class=s2>&#34;Manhattan&#34;</span> <span class=p>},</span> <span class=p>{</span> <span class=nx>borough</span><span class=o>:</span> <span class=s2>&#34;Brooklyn&#34;</span> <span class=p>}]</span> <span class=p>},</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=p>{</span> <span class=s2>&#34;grades.score&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$lt</span><span class=o>:</span> <span class=mi>5</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=p>{</span> <span class=nx>cuisine</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$ne</span><span class=o>:</span> <span class=s2>&#34;American&#34;</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=ln>7</span><span class=cl><span class=p>})</span>
</span></span></code></pre></div><h2 id=37>37</h2><blockquote><p>Write a MongoDB query to find the restaurants that have at least one grade with a score of less than 5 and that are located in the borough of Manhattan or Brooklyn, and their cuisine is not American or Chinese.</p></blockquote><p>è¿™é‡Œç”¨åˆ°äº†<code>ä¸æ˜¯...,ä¹Ÿä¸æ˜¯....</code>è¿™ä¸ªä¹Ÿè¯­æ³•</p><p><a href=https://www.mongodb.com/zh-cn/docs/manual/reference/operator/query/nor/ target=_blank rel="noreferrer nofollow">$nor - MongoDB æ‰‹å†Œ v8.0</a></p><p>é€‰æ‹©æ•°ç»„ä¸­æ‰€æœ‰æŸ¥è¯¢è°“è¯å‡æœªé€šè¿‡çš„æ–‡æ¡£</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>$nor :[ expr1 ,expr2...]
</span></span></code></pre></div><p>é‚£ä¹ˆæŸ¥è¯¢çš„æ–‡æ¡£æ»¡è¶³çš„æ¡ä»¶æ˜¯ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>expr1(doc1) == false and expr2(doc2) == false
</span></span></code></pre></div><h2 id=38>38</h2><blockquote><p>Write a MongoDB query to find the restaurants that have a grade with a score of 2 and a grade with a score of 6.</p></blockquote><p>grades å«æœ‰2ï¼Œå’Œ6</p><p>æˆ‘å†™çš„</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>({</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>    <span class=s2>&#34;grades.score&#34;</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>    <span class=s2>&#34;grades.score&#34;</span><span class=o>:</span> <span class=mi>6</span><span class=p>,</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>  <span class=p>})</span>
</span></span></code></pre></div><p>æ•ˆæœä¸€æ ·çš„å®˜æ–¹ç­”æ¡ˆã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>({</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>  <span class=nx>$and</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>    <span class=p>{</span><span class=s2>&#34;grades.score&#34;</span><span class=o>:</span> <span class=mi>2</span><span class=p>},</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>    <span class=p>{</span><span class=s2>&#34;grades.score&#34;</span><span class=o>:</span> <span class=mi>6</span><span class=p>}</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=ln>6</span><span class=cl><span class=p>})</span>
</span></span></code></pre></div><h2 id=39>39</h2><blockquote><p>Write a MongoDB query to find the restaurants that have a grade with a score of 2 and a grade with a score of 6 and are located in the borough of Manhattan.</p></blockquote><p>æ²¡æœ‰ä»€ä¹ˆéš¾åº¦</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>({</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>  <span class=nx>$and</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>    <span class=p>{</span><span class=s2>&#34;grades.score&#34;</span><span class=o>:</span> <span class=mi>2</span><span class=p>},</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>    <span class=p>{</span><span class=s2>&#34;grades.score&#34;</span><span class=o>:</span> <span class=mi>6</span><span class=p>},</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>    <span class=p>{</span><span class=s2>&#34;borough&#34;</span><span class=o>:</span> <span class=s2>&#34;Manhattan&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=ln>7</span><span class=cl><span class=p>})</span>
</span></span></code></pre></div><h2 id=40>40</h2><blockquote><p>Write a MongoDB query to find the restaurants that have a grade with a score of 2 and a grade with a score of 6 and are located in the borough of Manhattan or Brooklyn.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>({</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>  <span class=nx>$and</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>    <span class=p>{</span><span class=s2>&#34;grades.score&#34;</span><span class=o>:</span> <span class=mi>2</span><span class=p>},</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>    <span class=p>{</span><span class=s2>&#34;grades.score&#34;</span><span class=o>:</span> <span class=mi>6</span><span class=p>},</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>    <span class=p>{</span><span class=s2>&#34;borough&#34;</span><span class=o>:</span> <span class=p>{</span><span class=s2>&#34;$in&#34;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;Manhattan&#34;</span><span class=p>,</span> <span class=s2>&#34;Brooklyn&#34;</span><span class=p>]}}</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=ln>7</span><span class=cl><span class=p>})</span>
</span></span></code></pre></div></main><br><footer><script defer>document.addEventListener("keydown",function(e){if(document.activeElement.isContentEditable)return!1;if(document.activeElement.tagName=="INPUT")return!1;if(e.altKey||e.ctrlKey||e.shiftKey)return!1;var t=e.key;if(t==="h")e.preventDefault(),e.stopPropagation(),window.location.href="/";else if(t==="t")e.preventDefault(),e.stopPropagation(),window.location.href=`https://${location.hostname}/tags`;else if(t==="i"){e.preventDefault(),e.stopPropagation();const t=document.querySelectorAll("input");for(let e=0;e<t.length;e++)if(t[e].offsetParent!==null){t[e].selectionStart=t[e].selectionEnd=t[e].value.length,t[e].focus();break}}return!1})</script><script defer>function throttle(e,t){var n=Date.now();return function(){var s=Date.now();n+t-s<0&&(e(),n=s)}}function scrollHandler(){const e=Array.from(document.querySelectorAll("body h2, body h3"));function t(){for(var n,s,o,i=window.pageYOffset||document.documentElement.scrollTop,t=0;t<e.length;t++)s=e[t].getAttribute("id"),n=document.querySelector('nav ul li a[href="#'+s+'"]'),n&&n.classList.remove("active-toc");for(t=e.length-1;t>=0;t--)if(o=e[t].offsetTop,i>o-75&&(s=e[t].getAttribute("id"),n=document.querySelector('nav ul li a[href="#'+s+'"]'),n)){n.classList.add("active-toc");break}}window.addEventListener("scroll",throttle(t,200))}setTimeout(scrollHandler,100)</script><script defer>function addCopyButtonToCodeBlocks(){const e=document.querySelectorAll('code[class^="language-"]:not(.output):not([class*="language-console"])');e.forEach(e=>{const t=document.createElement("button");t.classList.add("copy-code-button"),t.innerHTML="copy",t.addEventListener("click",()=>{const s=e.querySelectorAll(".cl");let n="";s.forEach(e=>{n+=e.innerText}),navigator.clipboard.writeText(n),t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},1500)}),e.parentNode.before(t)})}setTimeout(function(){addCopyButtonToCodeBlocks()},100)</script><script defer src=/js/theme-switcher.js></script></footer></body></html>