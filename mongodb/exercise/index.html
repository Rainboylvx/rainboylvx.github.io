<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=cache-control content="max-age=0"><meta http-equiv=cache-control content="no-cache"><meta http-equiv=expires content="0"><meta http-equiv=expires content="Tue, 01 Jan 1980 1:00:00 GMT"><meta http-equiv=pragma content="no-cache"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png }><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#1b1b1b"><meta name=description content="MongoDB ç»ƒä¹  1"><script>(function(){const e=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");document.documentElement.setAttribute("data-theme",e)})()</script><title>MongoDB ç»ƒä¹  1 | Rainboy's Blog</title><style>:root{--background:#ffffff}@media(prefers-color-scheme:dark){:root{--background:#1b1b1b}}html{background-color:var(--background)}body{background-color:var(--background)}</style><link rel=stylesheet type=text/css href=/style.min.7b15735fcff4968d3e55518adf135c2b8ea065f6bc125f048829e9b2628beadc.css media=all><link rel=stylesheet href=/grid.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css integrity="sha512-fHwaWebuwA7NSF5Qg/af4UeDx9XqUpYpOGgubo3yWu+b2IQR4UeQwbb42Ti7gVAjNtVoI/I9TEoYeu9omwcC6g==" crossorigin=anonymous referrerpolicy=no-referrer></head><body><nav><ul class=menu><li><a tabindex=-1 class=menu-link href=/><u>H</u>ome</a></li><li><a tabindex=-1 class=menu-link href=/tags><u>T</u>ags</a></li><li><span style=cursor:pointer id=theme-switcher class=menu-link type=button>ğŸŒ™</span></li></ul></nav><div id=single-header><h1>MongoDB ç»ƒä¹  1</h1><div id=single-meta><span class=datesub>2025-09-09</span>
<span id=tags>&nbsp;&nbsp;
<span><a href=https://hugo-dead-simple.netlify.com/tags/mongodb/>#mongodb</a>
</span>&nbsp; <span><a href=https://hugo-dead-simple.netlify.com/tags/exercises/>#exercises</a>
</span>&nbsp;</span></div></div><aside class="hidden lg:block toc" id=tableOfContentContainer><nav id=TableOfContents><ul><li><a href=#5>5</a></li><li><a href=#8>8</a></li><li><a href=#9>9</a></li><li><a href=#10>10</a></li><li><a href=#11>11</a></li><li><a href=#12>12</a></li><li><a href=#13>13</a></li><li><a href=#14>14</a><ul><li><a href=#mongodb-nodejs-driver-çš„-find-æ–¹æ³•>MongoDB Node.js Driver çš„ <code>find</code> æ–¹æ³•</a></li><li><a href=#æŠ•å½±projectionåœ¨é€‰é¡¹å¯¹è±¡ä¸­>æŠ•å½±ï¼ˆProjectionï¼‰åœ¨é€‰é¡¹å¯¹è±¡ä¸­</a></li><li><a href=#ä¸ºä»€ä¹ˆå¿…é¡»ä½¿ç”¨-projection-å­—æ®µ>ä¸ºä»€ä¹ˆå¿…é¡»ä½¿ç”¨ <code>projection</code> å­—æ®µï¼Ÿ</a></li><li><a href=#æ€»ç»“>æ€»ç»“</a></li></ul></li><li><a href=#15>15</a></li><li><a href=#16-åŒ…å«regæŠ•å½±>16 åŒ…å«<code>Reg</code>+æŠ•å½±</a></li><li><a href=#17>17</a></li><li><a href=#18>18</a></li><li><a href=#19>19</a></li><li><a href=#20>20</a></li></ul></nav></aside><main><h2 id=5>5</h2><ol start=5><li>Write a MongoDB query to display all the restaurant which is in the borough Bronx.</li></ol><p>è¿™ä¸ªç®€å•,æœ¬è´¨æ˜¯æŸ¥è¯¢å›ºå®šçš„å€¼</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>[</span><span class=s2>&#34;restaurants&#34;</span><span class=p>].</span><span class=nx>find</span><span class=p>({</span><span class=s1>&#39;borough&#39;</span><span class=o>:</span><span class=s1>&#39;Bronx&#39;</span><span class=p>})</span>
</span></span></code></pre></div><h2 id=8>8</h2><ol start=8><li>Write a MongoDB query to find the restaurants who achieved a score more than 90.</li></ol><p>è®©æˆ‘ä»¬æŸ¥è¯¢ä¸€ä¸ªæ•°ç»„,æ•°ç»„é‡Œé¢æœ‰ä¸€ä¸ªObjectçš„å€¼<code>>=0</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>[</span><span class=s2>&#34;restaurants&#34;</span><span class=p>].</span><span class=nx>find</span><span class=p>({</span><span class=s1>&#39;grades.score&#39;</span><span class=o>:</span> <span class=p>{</span><span class=nx>$gt</span> <span class=o>:</span> <span class=mi>90</span><span class=p>}}).</span><span class=nx>count</span><span class=p>()</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>[</span><span class=s2>&#34;restaurants&#34;</span><span class=p>].</span><span class=nx>find</span><span class=p>({</span> <span class=s1>&#39;grades&#39;</span> <span class=o>:</span> <span class=p>{</span><span class=nx>$elemMatch</span> <span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;score&#34;</span> <span class=o>:</span><span class=p>{</span><span class=nx>$gt</span> <span class=o>:</span> <span class=mi>90</span><span class=p>}</span> <span class=p>}</span>  <span class=p>}</span> <span class=p>})</span>
</span></span></code></pre></div><p>è¿™ä¸¤ä¸ªçš„ç»“æœæ˜¯ç­‰ä»·çš„,åªä¸è¿‡ç¬¬äºŒä¸ªç”¨åˆ°äº†æ•°ç»„åŒ¹é…æ“ä½œç¬¦<code>$elemMatch</code></p><h2 id=9>9</h2><ol start=9><li>Write a MongoDB query to find the restaurants that achieved a score, more than 80 but less than 100.</li></ol><p>è¿™ä¸ªé¢˜ç›®çš„æ„æ€æ˜¯: <code>grades</code>é‡Œå­˜åœ¨ä¸€ä¸ªåˆ†æ•°,è¿™ä¸ªåˆ†æ•°åœ¨80ä¸90ä¹‹é—´</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>[</span><span class=s2>&#34;restaurants&#34;</span><span class=p>].</span><span class=nx>find</span><span class=p>({</span> <span class=s1>&#39;grades&#39;</span> <span class=o>:</span> <span class=p>{</span><span class=nx>$elemMatch</span> <span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;score&#34;</span> <span class=o>:</span><span class=p>{</span><span class=nx>$gt</span> <span class=o>:</span> <span class=mi>80</span><span class=p>,</span><span class=nx>$lt</span><span class=o>:</span><span class=mi>100</span><span class=p>}</span> <span class=p>}</span>  <span class=p>}</span> <span class=p>})</span>
</span></span></code></pre></div><h2 id=10>10</h2><ol start=10><li>Write a MongoDB query to find the restaurants which locate in latitude value less than -95.754168.</li></ol><p>è¿™é‡Œè€ƒå¯Ÿæˆ‘ä»¬å¦‚ä½•æŸ¥è¯¢æ•°ç»„é‡ŒæŸä¸ªä¸‹æ ‡çš„å€¼</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>db.restaurants.find<span class=o>({</span><span class=s2>&#34;address.coord.0&#34;</span>:<span class=o>{</span><span class=nv>$lte</span> :  -95.754168<span class=o>}</span> <span class=o>})</span>
</span></span></code></pre></div><h2 id=11>11</h2><ol start=11><li>Write a MongoDB query to find the restaurants that do not prepare any cuisine of &lsquo;American&rsquo; and their grade score more than 70 and latitude less than -65.754168.</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>db<span class=o>[</span><span class=s2>&#34;restaurants&#34;</span><span class=o>]</span>.count<span class=o>({</span>cuisine:<span class=o>{</span><span class=nv>$not</span>: <span class=o>{</span><span class=nv>$regex</span>: /.*American.*/ <span class=o>}</span> <span class=o>}</span>,grades:<span class=o>{</span><span class=nv>$elemMatch</span> : <span class=o>{</span> <span class=s2>&#34;score&#34;</span>:<span class=o>{</span><span class=nv>$gte</span>:70<span class=o>}</span> <span class=o>}}</span> <span class=o>})</span>
</span></span></code></pre></div><p>è¿™é‡Œè€ƒæŸ¥æˆ‘ä»¬æœ‰å¤šä¸ªæ¡ä»¶,åŒæ—¶æˆç«‹çš„æŸ¥è¯¢</p><p>å‘ç°ä¸€ä¸ªé—®é¢˜:</p><p>æˆ‘æŸ¥è¯¢äº†æ–‡æ¡£</p><ul><li>mongodbåœ¨æ•°ç»„ä¸Šçš„æŸ¥è¯¢ <a href=https://www.mongodb.com/zh-cn/docs/manual/tutorial/query-arrays/#specify-multiple-conditions-for-array-elements target=_blank rel="noreferrer nofollow">https://www.mongodb.com/zh-cn/docs/manual/tutorial/query-arrays/#specify-multiple-conditions-for-array-elements</a></li><li><a href=https://stackoverflow.com/questions/10907843/mongo-ne-query-with-an-array-not-working-as-expected target=_blank rel="noreferrer nofollow">mongodb - mongo $ne query with an array not working as expected - Stack Overflow</a></li></ul><p><code>$ne</code>æ“ä½œåœ¨æ•°ç»„çš„æŸ¥è¯¢ä¸æˆ‘æƒ³çš„ä¸ä¸€æ ·</p><p>å¦‚æœä½ å¸Œæœ›èƒ½å¤ŸåŒ¹é…æ•°ç»„ä¸­æœ‰éƒ¨åˆ†å…ƒç´ ä¸ &ldquo;red&rdquo; ä¸åŒ¹é…çš„æ–‡æ¡£ï¼Œå¯ä»¥ä½¿ç”¨ $elemMatch æ¥ç²¾ç¡®åŒ¹é…æ•°ç»„ä¸­çš„å•ä¸ªå…ƒç´ ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>newdb</span><span class=p>.</span><span class=nx>find</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>tags</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$elemMatch</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$ne</span><span class=o>:</span> <span class=s2>&#34;red&#34;</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><p>è¿™é‡Œå®˜æ–¹ç»™å‡ºçš„ç­”æ¡ˆ</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=err>db.restaurants.find(</span>
</span></span><span class=line><span class=cl>               <span class=p>{</span><span class=err>$and:</span>
</span></span><span class=line><span class=cl>                    <span class=err>[</span>
</span></span><span class=line><span class=cl>                       <span class=err>{</span><span class=nt>&#34;cuisine&#34;</span> <span class=p>:</span> <span class=p>{</span><span class=err>$ne</span> <span class=err>:</span><span class=nt>&#34;American &#34;</span><span class=p>}}</span><span class=err>,</span>
</span></span><span class=line><span class=cl>                       <span class=p>{</span><span class=nt>&#34;grades.score&#34;</span> <span class=p>:</span> <span class=p>{</span><span class=err>$gt</span> <span class=err>:</span> <span class=err>70</span><span class=p>}}</span><span class=err>,</span>
</span></span><span class=line><span class=cl>                       <span class=p>{</span><span class=nt>&#34;address.coord&#34;</span> <span class=p>:</span> <span class=p>{</span><span class=err>$lt</span> <span class=err>:</span> <span class=err>-65.754168</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>                    <span class=err>]</span>
</span></span><span class=line><span class=cl>                <span class=err>});</span>
</span></span></code></pre></div><h2 id=12>12</h2><ol start=12><li>Write a MongoDB query to find the restaurants which do not prepare any cuisine of &lsquo;American&rsquo; and achieved a score more than 70 and located in the longitude less than -65.754168.
Note : Do this query without using $and operator.</li></ol><p>å’Œä¸Šä¸€ä¸ªé—®é¢˜çš„é—®é¢˜ä¸€æ ·,åªæ˜¯ä¸è®©æˆ‘ä»¬ä½¿ç”¨<code>$and$</code>ç¬¦å·</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                           <span class=p>{</span>
</span></span><span class=line><span class=cl>                             <span class=s2>&#34;cuisine&#34;</span> <span class=o>:</span> <span class=p>{</span><span class=nx>$ne</span> <span class=o>:</span> <span class=s2>&#34;American &#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>                             <span class=s2>&#34;grades.score&#34;</span> <span class=o>:</span><span class=p>{</span><span class=nx>$gt</span><span class=o>:</span> <span class=mi>70</span><span class=p>},</span>
</span></span><span class=line><span class=cl>                             <span class=s2>&#34;address.coord&#34;</span> <span class=o>:</span> <span class=p>{</span><span class=nx>$lt</span> <span class=o>:</span> <span class=o>-</span><span class=mf>65.754168</span><span class=p>}</span>
</span></span><span class=line><span class=cl>                            <span class=p>}</span>
</span></span><span class=line><span class=cl>                     <span class=p>);</span>
</span></span></code></pre></div><h2 id=13>13</h2><ol start=13><li>Write a MongoDB query to find the restaurants which do not prepare any cuisine of &lsquo;American&rsquo; and achieved a grade point &lsquo;A&rsquo; not belongs to the borough Brooklyn. The document must be displayed according to the cuisine in descending order.</li></ol><p>å‰é¢çš„æ¡ä»¶è¿˜å¥½,è¿™é‡Œåªæ˜¯å¤šäº†ä¸€ä¸ªæ’åºçš„è¦æ±‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                             <span class=s2>&#34;cuisine&#34;</span> <span class=o>:</span> <span class=p>{</span><span class=nx>$ne</span> <span class=o>:</span> <span class=s2>&#34;American&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>                             <span class=s2>&#34;grades.grade&#34;</span> <span class=o>:</span><span class=s2>&#34;A&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                             <span class=s2>&#34;borough&#34;</span><span class=o>:</span> <span class=p>{</span><span class=nx>$ne</span> <span class=o>:</span> <span class=s2>&#34;Brooklyn&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>                       <span class=p>}</span> 
</span></span><span class=line><span class=cl>                    <span class=p>).</span><span class=nx>sort</span><span class=p>({</span><span class=s2>&#34;cuisine&#34;</span><span class=o>:-</span><span class=mi>1</span><span class=p>});</span>
</span></span></code></pre></div><h2 id=14>14</h2><ol start=14><li>Write a MongoDB query to find the restaurant Id, name, borough and cuisine for those restaurants which contain &lsquo;Wil&rsquo; as first three letters for its name.</li></ol><p>æŸ¥è¯¢çš„æ¡ä»¶æ˜¯nameçš„é¦–ä¸ªä¸‰ä¸ªå­—æ¯æ˜¯3ä¸ªWilå­—ç¬¦.</p><p>æˆ‘è¿™é‡Œçš„å†™æ³•ä¸å®˜æ–¹ä¸ä¸€æ ·,å› ä¸ºæˆ‘ä¸ç†è§£å®˜æ–¹çš„ç¬¬äºŒä¸ªå‚æ•°,ä¸ºä»€ä¹ˆè¿™æ ·å†™,å› ä¸ºæˆ‘æŸ¥è¯¢çš„nodejs api ä¸æ˜¯è¿™æ ·çš„.</p><p><a href=https://mongodb.github.io/node-mongodb-native/6.11/interfaces/FindOptions.html#projection target=_blank rel="noreferrer nofollow">https://mongodb.github.io/node-mongodb-native/6.11/interfaces/FindOptions.html#projection</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>[</span><span class=s2>&#34;restaurants&#34;</span><span class=p>].</span><span class=nx>find</span> <span class=p>({</span><span class=nx>name</span><span class=o>:</span><span class=sr>/AWil/</span><span class=p>}).</span><span class=nx>projection</span><span class=p>({</span><span class=nx>name</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span><span class=nx>restaurant_id</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span><span class=nx>borough</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span><span class=nx>cuisine</span><span class=o>:</span><span class=mi>1</span><span class=p>}})</span>
</span></span></code></pre></div><p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·? ,AI å‘Šè¯‰æˆ‘è¿™æ˜¯ä¸€ä¸ªå·®å¼‚!!!</p><p>ä½ æå‡ºçš„é—®é¢˜æ¶‰åŠåˆ° <strong>MongoDB Node.js Driver</strong> çš„ <code>find</code> æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ª <strong>é€‰é¡¹å¯¹è±¡ï¼ˆoptionsï¼‰</strong>ï¼Œè€Œ <strong>æŠ•å½±ï¼ˆprojectionï¼‰</strong> æ˜¯è¯¥é€‰é¡¹å¯¹è±¡ä¸­çš„ä¸€ä¸ªå­—æ®µã€‚è¿™æ˜¯ MongoDB <strong>Node.js Driver</strong> å’Œ <strong>MongoDB Shell</strong>ï¼ˆ<code>mongosh</code>ï¼‰ä¹‹é—´çš„ä¸€ä¸ªå·®å¼‚ã€‚</p><h3 id=mongodb-nodejs-driver-çš„-find-æ–¹æ³•>MongoDB Node.js Driver çš„ <code>find</code> æ–¹æ³•</h3><p>æ ¹æ®ä½ æä¾›çš„é“¾æ¥ï¼Œåœ¨ MongoDB çš„ <strong>Node.js Driver</strong> ç‰ˆæœ¬ 3.6 ä¸­ï¼Œ<code>find</code> æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•° <strong>å¿…é¡»æ˜¯ä¸€ä¸ªé€‰é¡¹å¯¹è±¡</strong>ï¼Œè¯¥å¯¹è±¡ä¸­å¯ä»¥åŒ…å«å¤šä¸ªé€‰é¡¹ï¼Œä¾‹å¦‚ <code>projection</code>, <code>sort</code>, <code>limit</code> ç­‰ã€‚</p><h4 id=find-æ–¹æ³•çš„ç­¾ånodejs-driver><code>find</code> æ–¹æ³•çš„ç­¾åï¼ˆNode.js Driverï¼‰</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>find</span><span class=p>(</span><span class=nx>filter</span><span class=p>,</span> <span class=nx>options</span><span class=p>)</span>
</span></span></code></pre></div><ul><li><code>filter</code>: æŸ¥è¯¢æ¡ä»¶ã€‚</li><li><code>options</code>: é€‰é¡¹å¯¹è±¡ï¼Œå…¶ä¸­åŒ…æ‹¬å¤šä¸ªå¯é€‰çš„å­—æ®µï¼Œä¾‹å¦‚ <code>projection</code>, <code>sort</code>, <code>limit</code> ç­‰ã€‚</li></ul><h3 id=æŠ•å½±projectionåœ¨é€‰é¡¹å¯¹è±¡ä¸­>æŠ•å½±ï¼ˆProjectionï¼‰åœ¨é€‰é¡¹å¯¹è±¡ä¸­</h3><p>åœ¨ <strong>MongoDB Node.js Driver</strong> ä¸­ï¼Œ<strong>æŠ•å½±ï¼ˆprojectionï¼‰</strong> æ˜¯é€šè¿‡é€‰é¡¹å¯¹è±¡ä¸­çš„ <code>projection</code> å­—æ®µæ¥æŒ‡å®šçš„ã€‚å› æ­¤ï¼Œç¬¬äºŒä¸ªå‚æ•°çš„å½¢å¼é€šå¸¸æ˜¯ä¸€ä¸ªåŒ…å« <code>projection</code> å­—æ®µçš„å¯¹è±¡ï¼Œè€Œ <strong>æŠ•å½±ï¼ˆprojectionï¼‰</strong> æœ¬èº«æ˜¯ä¸€ä¸ªæ–‡æ¡£ï¼Œå®šä¹‰äº†éœ€è¦åŒ…å«æˆ–æ’é™¤çš„å­—æ®µã€‚</p><h4 id=ç¤ºä¾‹ä»£ç >ç¤ºä¾‹ä»£ç ï¼š</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>MongoClient</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;mongodb&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>queryRestaurants</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>client</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>MongoClient</span><span class=p>(</span><span class=s1>&#39;mongodb://localhost:27017&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=nx>client</span><span class=p>.</span><span class=nx>connect</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>db</span> <span class=o>=</span> <span class=nx>client</span><span class=p>.</span><span class=nx>db</span><span class=p>(</span><span class=s1>&#39;test&#39;</span><span class=p>);</span> <span class=c1>// å‡è®¾ä½ çš„æ•°æ®åº“åæ˜¯ &#39;test&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>collection</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>collection</span><span class=p>(</span><span class=s1>&#39;restaurants&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// ä½¿ç”¨ find æŸ¥è¯¢å¹¶æŠ•å½±
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>cursor</span> <span class=o>=</span> <span class=nx>collection</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=sr>/^Wil/</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>projection</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;restaurant_id&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;borough&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;cuisine&#34;</span><span class=o>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// è·å–æŸ¥è¯¢ç»“æœå¹¶æ‰“å°
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>results</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>cursor</span><span class=p>.</span><span class=nx>toArray</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>results</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=nx>client</span><span class=p>.</span><span class=nx>close</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>queryRestaurants</span><span class=p>().</span><span class=k>catch</span><span class=p>(</span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>);</span>
</span></span></code></pre></div><h3 id=ä¸ºä»€ä¹ˆå¿…é¡»ä½¿ç”¨-projection-å­—æ®µ>ä¸ºä»€ä¹ˆå¿…é¡»ä½¿ç”¨ <code>projection</code> å­—æ®µï¼Ÿ</h3><p>åœ¨ Node.js MongoDB Driver çš„ <strong><code>find</code></strong> æ–¹æ³•ä¸­ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ª <strong>é€‰é¡¹å¯¹è±¡ï¼ˆoptionsï¼‰</strong>ï¼Œå› æ­¤ä½ éœ€è¦æ˜ç¡®æŒ‡å®š <code>projection</code> å­—æ®µæ¥è®¾ç½®æŸ¥è¯¢è¿”å›çš„å­—æ®µã€‚è¿™æ˜¯ä¸ <strong>MongoDB Shellï¼ˆmongoshï¼‰</strong> çš„å·®å¼‚ï¼Œåè€…å¯ä»¥ç›´æ¥å°†æŠ•å½±æ–‡æ¡£ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚</p><h4 id=nodejs-driver-çš„é€‰é¡¹å¯¹è±¡ç»“æ„>Node.js Driver çš„é€‰é¡¹å¯¹è±¡ç»“æ„</h4><p>åœ¨ Node.js ä¸­ï¼Œä½ å¯ä»¥ä¼ é€’ä¸€ä¸ªåŒ…å«å¤šä¸ªé€‰é¡¹å­—æ®µçš„å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>projection</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;restaurant_id&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;borough&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;cuisine&#34;</span><span class=o>:</span> <span class=mi>1</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>sort</span><span class=o>:</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=mi>1</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>limit</span><span class=o>:</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ul><li><code>projection</code>: æŒ‡å®šè¿”å›çš„å­—æ®µã€‚</li><li><code>sort</code>: æŒ‡å®šæ’åºè§„åˆ™ã€‚</li><li><code>limit</code>: é™åˆ¶è¿”å›çš„æ–‡æ¡£æ•°é‡ã€‚</li></ul><h3 id=æ€»ç»“>æ€»ç»“</h3><p>åœ¨ <strong>MongoDB Node.js Driver</strong> ä¸­ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ª <strong>é€‰é¡¹å¯¹è±¡ï¼ˆoptionsï¼‰</strong>ï¼Œå…¶ä¸­åŒ…å« <code>projection</code> å­—æ®µæ¥æŒ‡å®šæŠ•å½±ã€‚è€Œåœ¨ <strong>MongoDB Shellï¼ˆmongoshï¼‰</strong> ä¸­ï¼Œç¬¬äºŒä¸ªå‚æ•°ç›´æ¥æ˜¯ä¸€ä¸ªæŠ•å½±æ–‡æ¡£ï¼Œå¯ä»¥çœç•¥ <code>projection</code> å­—æ®µåã€‚</p><h4 id=nodejs-driver-ä½¿ç”¨-projection>Node.js Driver ä½¿ç”¨ <code>projection</code>ï¼š</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=sr>/^Wil/</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>projection</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;restaurant_id&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;borough&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;cuisine&#34;</span><span class=o>:</span> <span class=mi>1</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div><h4 id=mongodb-shell-ä¸­ç›´æ¥ä¼ é€’æŠ•å½±æ–‡æ¡£>MongoDB Shell ä¸­ç›´æ¥ä¼ é€’æŠ•å½±æ–‡æ¡£ï¼š</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=sr>/^Wil/</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=s2>&#34;restaurant_id&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;borough&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;cuisine&#34;</span><span class=o>:</span> <span class=mi>1</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div><p>å¥½å§,ç»è¿‡æˆ‘çš„æŸ¥è¯¢,è¿™çœŸçš„æ˜¯ä¸€ä¸ªå·®å¼‚:</p><ul><li><a href=https://stackoverflow.com/questions/67090307/mongodb-projection-syntax target=_blank rel="noreferrer nofollow">https://stackoverflow.com/questions/67090307/mongodb-projection-syntax</a></li><li><a href=https://www.mongodb.com/zh-cn/docs/manual/reference/method/db.collection.findOne/ target=_blank rel="noreferrer nofollow">https://www.mongodb.com/zh-cn/docs/manual/reference/method/db.collection.findOne/</a></li></ul><p>ä¸¤è€…ç¡®å®ä¸ä¸€æ ·.</p><h2 id=15>15</h2><ol start=15><li>Write a MongoDB query to find the restaurant Id, name, borough and cuisine for those restaurants which contain &lsquo;ces&rsquo; as last three letters for its name.</li></ol><p>å’Œä¸Šä¸€ä¸ªé—®é¢˜ä¸€æ ·,ä½†æ˜¯è¦æŸ¥è¯¢çš„å€¼æ˜¯æœ€åä¸‰ä¸ªå­—ç¬¦,è¿˜æ˜¯ä½¿ç”¨regex</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=cl><span class=p>{</span><span class=nx>name</span><span class=o>:</span> <span class=sr>/ces$/</span><span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;restaurant_id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;name&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span><span class=s2>&#34;borough&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;cuisine&#34;</span> <span class=o>:</span><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>[</span><span class=s2>&#34;restaurants&#34;</span><span class=p>].</span><span class=nx>find</span> <span class=p>({</span><span class=nx>name</span><span class=o>:</span><span class=sr>/ces$/</span><span class=p>}).</span><span class=nx>projection</span><span class=p>({</span><span class=nx>name</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=nx>restaurant_id</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span><span class=nx>borough</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span><span class=nx>cuisine</span><span class=o>:</span><span class=mi>1</span><span class=p>})</span>
</span></span></code></pre></div><h2 id=16-åŒ…å«regæŠ•å½±>16 åŒ…å«<code>Reg</code>+æŠ•å½±</h2><ol start=16><li>Write a MongoDB query to find the restaurant Id, name, borough and cuisine for those restaurants which contain &lsquo;Reg&rsquo; as three letters somewhere in its name.</li></ol><p>æ”¹å˜ä¸€ä¸‹regå°±å¯ä»¥äº†.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>[</span><span class=s2>&#34;restaurants&#34;</span><span class=p>].</span><span class=nx>find</span><span class=p>({</span><span class=nx>name</span><span class=o>:</span><span class=sr>/Reg/</span><span class=p>},{</span><span class=nx>name</span><span class=o>:</span><span class=mi>1</span><span class=p>}).</span><span class=nx>count</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>[</span><span class=s2>&#34;restaurants&#34;</span><span class=p>].</span><span class=nx>find</span><span class=p>({</span><span class=nx>name</span><span class=o>:</span><span class=sr>/Reg/</span><span class=p>},{</span><span class=nx>name</span><span class=o>:</span><span class=mi>1</span><span class=p>}).</span><span class=nx>count</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=cl><span class=p>{</span><span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=sr>/.*Reg.*/</span><span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;restaurant_id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;name&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span><span class=s2>&#34;borough&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;cuisine&#34;</span> <span class=o>:</span><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div><h2 id=17>17</h2><ol start=17><li>Write a MongoDB query to find the restaurants which belong to the borough Bronx and prepared either American or Chinese dish.</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>[</span><span class=s2>&#34;restaurants&#34;</span><span class=p>].</span><span class=nx>find</span><span class=p>({</span><span class=s2>&#34;cuisine&#34;</span><span class=o>:</span> <span class=p>{</span><span class=nx>$in</span> <span class=o>:</span><span class=p>[</span><span class=s1>&#39;Chinese&#39;</span><span class=p>,</span> <span class=s1>&#39;American &#39;</span><span class=p>]}</span> <span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;borough&#34;</span><span class=o>:</span> <span class=s2>&#34;Bronx&#34;</span>
</span></span><span class=line><span class=cl><span class=p>},{</span><span class=s2>&#34;cuisine&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>}).</span><span class=nx>count</span><span class=p>()</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;borough&#34;</span><span class=o>:</span> <span class=s2>&#34;Bronx&#34;</span> <span class=p>,</span>
</span></span><span class=line><span class=cl><span class=nx>$or</span> <span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl><span class=p>{</span> <span class=s2>&#34;cuisine&#34;</span> <span class=o>:</span> <span class=s2>&#34;American &#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>{</span> <span class=s2>&#34;cuisine&#34;</span> <span class=o>:</span> <span class=s2>&#34;Chinese&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div><h2 id=18>18</h2><p>Write a MongoDB query to find the restaurant Id, name, borough and cuisine for those restaurants which belong to the borough Staten Island or Queens or Bronxor Brooklyn.</p><p>å’Œæˆ‘çš„ä¸Šä¸€ä¸ªæ‰§è¡Œ<code>$in</code>çš„è¯­æ³•ä¸€æ ·</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span><span class=s2>&#34;borough&#34;</span> <span class=o>:</span><span class=p>{</span><span class=nx>$in</span> <span class=o>:</span><span class=p>[</span><span class=s2>&#34;Staten Island&#34;</span><span class=p>,</span><span class=s2>&#34;Queens&#34;</span><span class=p>,</span><span class=s2>&#34;Bronx&#34;</span><span class=p>,</span><span class=s2>&#34;Brooklyn&#34;</span><span class=p>]}},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;restaurant_id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span><span class=s2>&#34;borough&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;cuisine&#34;</span> <span class=o>:</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span></code></pre></div><h2 id=19>19</h2><p>Write a MongoDB query to find the restaurant Id, name, borough and cuisine for those restaurants which are not belonging to the borough Staten Island or Queens or Bronxor Brooklyn.</p><p>ä»æ•°ç†é€»è¾‘çš„è§’åº¦æ¥çœ‹,<span class=katex><span class=katex-mathml><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo mathvariant="normal">âˆ‰</mo><mo stretchy="false">{</mo><mtext>boroughÂ StatenÂ IslandÂ ,Â QueensÂ ,Â BronxorÂ Brooklyn</mtext><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">a \notin \{\text{borough Staten Island , Queens , Bronxor Brooklyn} \}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:1em;vertical-align:-.25em></span><span class="mord mathnormal">a</span><span class=mspace style=margin-right:.2778em></span><span class=mrel><span class=mord><span class=mrel>âˆˆ</span></span><span class="mord vbox"><span class=thinbox><span class=llap><span class=strut style=height:1em;vertical-align:-.25em></span><span class=inner><span class=mord><span class=mord>/</span><span class=mspace style=margin-right:.0556em></span></span></span><span class=fix></span></span></span></span></span><span class=mspace style=margin-right:.2778em></span></span><span class=base><span class=strut style=height:1em;vertical-align:-.25em></span><span class=mopen>{</span><span class="mord text"><span class=mord>boroughÂ StatenÂ IslandÂ ,Â QueensÂ ,Â BronxorÂ Brooklyn</span></span><span class=mclose>}</span></span></span></span> å½“è¿™ä¸ªæ¡ä»¶ä¸ºtrueçš„æ—¶å€™,è¿™é‡Œä½¿ç”¨<code>$nin</code>æ“ä½œ</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=cl><span class=p>{</span><span class=s2>&#34;borough&#34;</span> <span class=o>:</span><span class=p>{</span><span class=nx>$nin</span> <span class=o>:</span><span class=p>[</span><span class=s2>&#34;Staten Island&#34;</span><span class=p>,</span><span class=s2>&#34;Queens&#34;</span><span class=p>,</span><span class=s2>&#34;Bronx&#34;</span><span class=p>,</span><span class=s2>&#34;Brooklyn&#34;</span><span class=p>]}},</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;restaurant_id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;name&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span><span class=s2>&#34;borough&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;cuisine&#34;</span> <span class=o>:</span><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div><h2 id=20>20</h2><p>Write a MongoDB query to find the restaurant Id, name, borough and cuisine for those restaurants which achieved a score which is not more than 10.</p><p>è¿™é‡Œçš„æ ¸å¿ƒå°±åœ¨äº not more than 10 ,æ•°å­¦å†™æ³•</p><span class=katex-display><span class=katex><span class=katex-mathml><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">Â¬</mi><mo stretchy="false">(</mo><mi>g</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>e</mi><mi>s</mi><mi mathvariant="normal">.</mi><mi>s</mi><mi>c</mi><mi>o</mi><mi>r</mi><mi>e</mi><mo>&gt;</mo><mn>10</mn><mo stretchy="false">)</mo><mo>â‡”</mo><mi>g</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>e</mi><mi>s</mi><mi mathvariant="normal">.</mi><mi>s</mi><mi>c</mi><mi>o</mi><mi>r</mi><mi>e</mi><mo>&lt;</mo><mo>=</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">
\neg (grades.score &gt; 10) \Leftrightarrow grades.score &lt;= 10
</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:1em;vertical-align:-.25em></span><span class=mord>Â¬</span><span class=mopen>(</span><span class="mord mathnormal" style=margin-right:.03588em>g</span><span class="mord mathnormal" style=margin-right:.02778em>r</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span><span class="mord mathnormal">es</span><span class=mord>.</span><span class="mord mathnormal">score</span><span class=mspace style=margin-right:.2778em></span><span class=mrel>></span><span class=mspace style=margin-right:.2778em></span></span><span class=base><span class=strut style=height:1em;vertical-align:-.25em></span><span class=mord>10</span><span class=mclose>)</span><span class=mspace style=margin-right:.2778em></span><span class=mrel>â‡”</span><span class=mspace style=margin-right:.2778em></span></span><span class=base><span class=strut style=height:.8889em;vertical-align:-.1944em></span><span class="mord mathnormal" style=margin-right:.03588em>g</span><span class="mord mathnormal" style=margin-right:.02778em>r</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span><span class="mord mathnormal">es</span><span class=mord>.</span><span class="mord mathnormal">score</span><span class=mspace style=margin-right:.2778em></span><span class=mrel>&lt;=</span><span class=mspace style=margin-right:.2778em></span></span><span class=base><span class=strut style=height:.6444em></span><span class=mord>10</span></span></span></span></span><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>[</span><span class=s2>&#34;restaurants&#34;</span><span class=p>].</span><span class=nx>find</span><span class=p>({</span><span class=s2>&#34;grades.score&#34;</span><span class=o>:</span> <span class=p>{</span><span class=nx>$lte</span><span class=o>:</span> <span class=mi>10</span><span class=p>}}).</span><span class=nx>count</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span> <span class=p>{</span><span class=s2>&#34;grades.score&#34;</span> <span class=o>:</span> <span class=p>{</span> <span class=nx>$not</span><span class=o>:</span> <span class=p>{</span><span class=nx>$gt</span> <span class=o>:</span> <span class=mi>10</span><span class=p>}</span> <span class=p>}</span> <span class=p>}).</span><span class=nx>count</span><span class=p>()</span>
</span></span></code></pre></div><p>æ©&mldr;&mldr;&mldr;.., ä¸¤è€…ç«Ÿç„¶æ˜¯ä¸ä¸€æ ·çš„.</p><p>é¢˜ç›®åº”è¯¥é—®çš„æ˜¯: æ‰€æœ‰çš„åˆ†éƒ½ä¸è¶…è¿‡10.</p><p><code>$lte:10</code> åº”è¯¥æ˜¯åªè¦æœ‰ä¸€ä¸ª(å­˜åœ¨)<code>&lt;=10</code> å°±æˆç«‹</p><p>é‡åˆ°è¿™ç§äº‹ä»¶,åº”è¯¥é¦–å…ˆæŸ¥æ–‡æ¡£: <a href=https://www.mongodb.com/zh-cn/docs/manual/reference/operator/query/not/ target=_blank rel="noreferrer nofollow">https://www.mongodb.com/zh-cn/docs/manual/reference/operator/query/not/</a>,ä½†æ–‡æ¡£ä¸Šæ²¡æœ‰è¯´.</p><p><code>find({ "grades.score": {$gt : 10} })</code> è¡¨ç¤ºçš„æ„æ€å…¶å®æ˜¯: <span class=katex><span class=katex-mathml><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆƒ</mi><mo stretchy="false">(</mo><mi>x</mi><mo>&gt;</mo><mn>10</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\exists (x &gt; 10)</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:1em;vertical-align:-.25em></span><span class=mord>âˆƒ</span><span class=mopen>(</span><span class="mord mathnormal">x</span><span class=mspace style=margin-right:.2778em></span><span class=mrel>></span><span class=mspace style=margin-right:.2778em></span></span><span class=base><span class=strut style=height:1em;vertical-align:-.25em></span><span class=mord>10</span><span class=mclose>)</span></span></span></span></p><p><code>find({ "grades.score": {$not :{ $gt : 10} }})</code> è¡¨ç¤ºçš„æ„æ€å…¶å®æ˜¯: <span class=katex><span class=katex-mathml><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Â¬</mi><mi mathvariant="normal">âˆƒ</mi><mo stretchy="false">(</mo><mi>x</mi><mo>&gt;</mo><mn>10</mn><mo stretchy="false">)</mo><mo>â†’</mo><mi mathvariant="normal">âˆ€</mi><mo stretchy="false">(</mo><mi>x</mi><mo>&lt;</mo><mo>=</mo><mn>10</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\neg \exists (x &gt; 10) \to \forall (x&lt;=10)</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:1em;vertical-align:-.25em></span><span class=mord>Â¬âˆƒ</span><span class=mopen>(</span><span class="mord mathnormal">x</span><span class=mspace style=margin-right:.2778em></span><span class=mrel>></span><span class=mspace style=margin-right:.2778em></span></span><span class=base><span class=strut style=height:1em;vertical-align:-.25em></span><span class=mord>10</span><span class=mclose>)</span><span class=mspace style=margin-right:.2778em></span><span class=mrel>â†’</span><span class=mspace style=margin-right:.2778em></span></span><span class=base><span class=strut style=height:1em;vertical-align:-.25em></span><span class=mord>âˆ€</span><span class=mopen>(</span><span class="mord mathnormal">x</span><span class=mspace style=margin-right:.2778em></span><span class=mrel>&lt;=</span><span class=mspace style=margin-right:.2778em></span></span><span class=base><span class=strut style=height:1em;vertical-align:-.25em></span><span class=mord>10</span><span class=mclose>)</span></span></span></span>,è¿™æ ·å°±èƒ½ç†è§£äº†</p></main><br><footer><script defer>document.addEventListener("keydown",function(e){if(document.activeElement.isContentEditable)return!1;if(document.activeElement.tagName=="INPUT")return!1;if(e.altKey||e.ctrlKey||e.shiftKey)return!1;var t=e.key;if(t==="h")e.preventDefault(),e.stopPropagation(),window.location.href="/";else if(t==="t")e.preventDefault(),e.stopPropagation(),window.location.href=`https://${location.hostname}/tags`;else if(t==="i"){e.preventDefault(),e.stopPropagation();const t=document.querySelectorAll("input");for(let e=0;e<t.length;e++)if(t[e].offsetParent!==null){t[e].selectionStart=t[e].selectionEnd=t[e].value.length,t[e].focus();break}}return!1})</script><script defer>function throttle(e,t){var n=Date.now();return function(){var s=Date.now();n+t-s<0&&(e(),n=s)}}function scrollHandler(){const e=Array.from(document.querySelectorAll("body h2, body h3"));function t(){for(var n,s,o,i=window.pageYOffset||document.documentElement.scrollTop,t=0;t<e.length;t++)s=e[t].getAttribute("id"),n=document.querySelector('nav ul li a[href="#'+s+'"]'),n&&n.classList.remove("active-toc");for(t=e.length-1;t>=0;t--)if(o=e[t].offsetTop,i>o-75&&(s=e[t].getAttribute("id"),n=document.querySelector('nav ul li a[href="#'+s+'"]'),n)){n.classList.add("active-toc");break}}window.addEventListener("scroll",throttle(t,200))}setTimeout(scrollHandler,100)</script><script defer>function addCopyButtonToCodeBlocks(){const e=document.querySelectorAll('code[class^="language-"]:not(.output):not([class*="language-console"])');e.forEach(e=>{const t=document.createElement("button");t.classList.add("copy-code-button"),t.innerHTML="copy",t.addEventListener("click",()=>{const s=e.querySelectorAll(".cl");let n="";s.forEach(e=>{n+=e.innerText}),navigator.clipboard.writeText(n),t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},1500)}),e.parentNode.before(t)})}setTimeout(function(){addCopyButtonToCodeBlocks()},100)</script><script defer src=/js/theme-switcher.js></script></footer></body></html>