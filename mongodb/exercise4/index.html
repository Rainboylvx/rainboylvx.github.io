<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=cache-control content="max-age=0"><meta http-equiv=cache-control content="no-cache"><meta http-equiv=expires content="0"><meta http-equiv=expires content="Tue, 01 Jan 1980 1:00:00 GMT"><meta http-equiv=pragma content="no-cache"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png }><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#1b1b1b"><meta name=description content="MongoDB ç»ƒä¹  4"><script>(function(){const e=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");document.documentElement.setAttribute("data-theme",e)})()</script><title>MongoDB ç»ƒä¹  4 | Rainboy's Blog</title><style>:root{--background:#ffffff}@media(prefers-color-scheme:dark){:root{--background:#1b1b1b}}html{background-color:var(--background)}body{background-color:var(--background)}</style><link rel=stylesheet type=text/css href=/style.min.ec0f719b913e581207983cf92193a08ecc267bcfa103b18138938c37c3af261a.css media=all><link rel=stylesheet href=/grid.css></head><body><nav><ul class=menu><li><a tabindex=-1 class=menu-link href=/><u>H</u>ome</a></li><li><a tabindex=-1 class=menu-link href=/tags><u>T</u>ags</a></li><li><span style=cursor:pointer id=theme-switcher class=menu-link type=button>ğŸŒ™</span></li></ul></nav><div id=single-header><h1>MongoDB ç»ƒä¹  4</h1><div id=single-meta><span class=datesub>2025-09-09</span>
<span id=tags>&nbsp;&nbsp;
<span><a href=https://hugo-dead-simple.netlify.com/tags/mongodb/>#mongodb</a>
</span>&nbsp; <span><a href=https://hugo-dead-simple.netlify.com/tags/exercises/>#exercises</a>
</span>&nbsp;</span></div></div><aside class="hidden lg:block toc" id=tableOfContentContainer><nav id=TableOfContents><ul><li><a href=#51>51</a><ul><li><a href=#å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹æ–‡æ¡£é›†åˆ>å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹æ–‡æ¡£é›†åˆï¼š</a></li><li><a href=#æ–¹æ³•-1ä½¿ç”¨-avg-æ“ä½œç¬¦>æ–¹æ³• 1ï¼šä½¿ç”¨ <code>$avg</code> æ“ä½œç¬¦</a></li><li><a href=#èšåˆç®¡é“ç¤ºä¾‹>èšåˆç®¡é“ç¤ºä¾‹ï¼š</a></li><li><a href=#è§£é‡Š>è§£é‡Šï¼š</a></li><li><a href=#æ–¹æ³•-2ä½¿ç”¨-unwind-ä¸-group-æ¥æ±‚å¹³å‡å€¼>æ–¹æ³• 2ï¼šä½¿ç”¨ <code>$unwind</code> ä¸ <code>$group</code> æ¥æ±‚å¹³å‡å€¼</a></li><li><a href=#è§£é‡Š-1>è§£é‡Šï¼š</a></li><li><a href=#æ–¹æ³•-3ç›´æ¥è®¡ç®—å­—æ®µçš„å¹³å‡å€¼>æ–¹æ³• 3ï¼šç›´æ¥è®¡ç®—å­—æ®µçš„å¹³å‡å€¼</a></li><li><a href=#æ€»ç»“>æ€»ç»“ï¼š</a></li></ul></li><li><a href=#52>52</a></li><li><a href=#53>53</a></li><li><a href=#54>54</a></li><li><a href=#55>55</a></li><li><a href=#56-å¦‚ä½•æŒ‰ä¸¤ä¸ªå€¼è¿›è¡Œåˆ†ç»„>56 å¦‚ä½•æŒ‰ä¸¤ä¸ªå€¼è¿›è¡Œåˆ†ç»„</a></li><li><a href=#57-å¤šé˜¶æ®µé…åˆ>57 å¤šé˜¶æ®µé…åˆ</a></li><li><a href=#58-åŒä¸Š>58 åŒä¸Š</a></li><li><a href=#59>59</a></li><li><a href=#60>60</a></li><li><a href=#61-66-å¹³å‡åˆ†æœ€é«˜ä½åˆ†>61-66 å¹³å‡åˆ†,æœ€é«˜ä½åˆ†</a></li><li><a href=#67>67</a></li><li><a href=#68>68</a></li><li><a href=#69>69</a></li><li><a href=#70>70</a></li><li><a href=#71>71</a></li><li><a href=#72>72</a></li><li><a href=#73>73</a></li><li><a href=#74>74</a></li><li><a href=#75>75</a></li><li><a href=#76--77-æ­£åˆ™>76 77 æ­£åˆ™</a></li><li><a href=#78>78</a></li><li><a href=#79>79</a></li><li><a href=#80>80</a></li><li><a href=#81>81</a></li><li><a href=#82>82</a></li><li><a href=#83>83</a></li></ul></nav></aside><main><h2 id=51>51</h2><blockquote><p>Write a MongoDB query to find the average score for each restaurant.</p></blockquote><p>ä¸€ä¸ªæ•°ç»„çš„å¹³å‡å€¼</p><p>è¿™é‡Œæˆ‘é‡åˆ°çš„ç¬¬ä¸€ä¸ª <code>aggregate</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln> 1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>aggregate</span><span class=p>([{</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>    <span class=nx>$unwind</span><span class=o>:</span> <span class=s2>&#34;$grades&#34;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=nx>$group</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>      <span class=nx>_id</span><span class=o>:</span> <span class=s2>&#34;$name&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>      <span class=nx>avgScore</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=nx>$avg</span><span class=o>:</span> <span class=s2>&#34;$grades.score&#34;</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=p>])</span>
</span></span></code></pre></div><p>è¿™é‡Œgptç»™å‡ºçš„å¤šç§æ±‚å¹³å‡å€¼çš„æ–¹æ³•</p><p>åœ¨ MongoDB ä¸­ï¼Œè¦æ±‚æ•°ç»„çš„å¹³å‡å€¼å¯ä»¥ä½¿ç”¨ <strong>èšåˆæ¡†æ¶</strong> æ¥å¤„ç†ã€‚MongoDB çš„èšåˆæ¡†æ¶æä¾›äº†å¼ºå¤§çš„æ•°æ®æ“ä½œåŠŸèƒ½ï¼ŒåŒ…æ‹¬è®¡ç®—æ•°ç»„ä¸­å…ƒç´ çš„å¹³å‡å€¼ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼æ¥å®ç°ï¼š</p><h3 id=å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹æ–‡æ¡£é›†åˆ>å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹æ–‡æ¡£é›†åˆï¼š</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=ln>1</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>  <span class=nt>&#34;_id&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>  <span class=nt>&#34;scores&#34;</span><span class=p>:</span> <span class=p>[</span><span class=mi>90</span><span class=p>,</span> <span class=mi>80</span><span class=p>,</span> <span class=mi>70</span><span class=p>,</span> <span class=mi>85</span><span class=p>]</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=p>}</span><span class=err>,</span>
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>  <span class=nt>&#34;_id&#34;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=ln>7</span><span class=cl>  <span class=nt>&#34;scores&#34;</span><span class=p>:</span> <span class=p>[</span><span class=mi>60</span><span class=p>,</span> <span class=mi>75</span><span class=p>,</span> <span class=mi>85</span><span class=p>,</span> <span class=mi>90</span><span class=p>]</span>
</span></span><span class=line><span class=ln>8</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=æ–¹æ³•-1ä½¿ç”¨-avg-æ“ä½œç¬¦>æ–¹æ³• 1ï¼šä½¿ç”¨ <code>$avg</code> æ“ä½œç¬¦</h3><p>MongoDB çš„èšåˆæ¡†æ¶å…è®¸åœ¨ç®¡é“ä¸­ä½¿ç”¨ <code>$avg</code> æ“ä½œç¬¦æ¥è®¡ç®—æŸä¸ªæ•°ç»„çš„å¹³å‡å€¼ã€‚ä¸ºäº†è®¡ç®—æ•°ç»„ <code>scores</code> çš„å¹³å‡å€¼ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå°†æ•°ç»„å…ƒç´ å±•å¼€ï¼ˆä½¿ç”¨ <code>$unwind</code>ï¼‰ï¼Œç„¶åè®¡ç®—å¹³å‡å€¼ã€‚</p><h3 id=èšåˆç®¡é“ç¤ºä¾‹>èšåˆç®¡é“ç¤ºä¾‹ï¼š</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>collection</span><span class=p>.</span><span class=nx>aggregate</span><span class=p>([</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>    <span class=nx>$project</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>      <span class=nx>averageScore</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$avg</span><span class=o>:</span> <span class=s2>&#34;$scores&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=ln>7</span><span class=cl><span class=p>])</span>
</span></span></code></pre></div><h3 id=è§£é‡Š>è§£é‡Šï¼š</h3><ol><li><strong><code>$project</code></strong>ï¼šç”¨äºæŒ‡å®šè¾“å‡ºçš„å­—æ®µï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æŒ‡å®šäº†ä¸€ä¸ªæ–°å­—æ®µ <code>averageScore</code>ã€‚</li><li><strong><code>$avg</code></strong>ï¼šç”¨äºè®¡ç®—æŒ‡å®šå­—æ®µçš„å¹³å‡å€¼ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åº”ç”¨ <code>$avg</code> æ“ä½œç¬¦æ¥è®¡ç®— <code>scores</code> æ•°ç»„çš„å¹³å‡å€¼ã€‚</li></ol><h3 id=æ–¹æ³•-2ä½¿ç”¨-unwind-ä¸-group-æ¥æ±‚å¹³å‡å€¼>æ–¹æ³• 2ï¼šä½¿ç”¨ <code>$unwind</code> ä¸ <code>$group</code> æ¥æ±‚å¹³å‡å€¼</h3><p>å¦‚æœä½ æƒ³æ›´ç»†ç²’åº¦åœ°å¤„ç†æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨ <code>$unwind</code> æ¥å±•å¹³æ•°ç»„ï¼Œç„¶åä½¿ç”¨ <code>$group</code> æ¥æ±‚æ•°ç»„çš„å¹³å‡å€¼ã€‚</p><h4 id=èšåˆç®¡é“ç¤ºä¾‹-1>èšåˆç®¡é“ç¤ºä¾‹ï¼š</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>collection</span><span class=p>.</span><span class=nx>aggregate</span><span class=p>([</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>  <span class=p>{</span> <span class=nx>$unwind</span><span class=o>:</span> <span class=s2>&#34;$scores&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>  <span class=p>{</span> <span class=nx>$group</span><span class=o>:</span> <span class=p>{</span> <span class=nx>_id</span><span class=o>:</span> <span class=kc>null</span><span class=p>,</span> <span class=nx>averageScore</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$avg</span><span class=o>:</span> <span class=s2>&#34;$scores&#34;</span> <span class=p>}</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=p>])</span>
</span></span></code></pre></div><h3 id=è§£é‡Š-1>è§£é‡Šï¼š</h3><ol><li><strong><code>$unwind</code></strong>ï¼šå°† <code>scores</code> æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ å±•å¹³ä¸ºå•ç‹¬çš„æ–‡æ¡£ã€‚æ¯ä¸ªæ–‡æ¡£å°†åŒ…å«ä¸€ä¸ªæ•°ç»„å…ƒç´ ã€‚</li><li><strong><code>$group</code></strong>ï¼šå°†æ‰€æœ‰å±•å¹³åçš„æ–‡æ¡£ç»„åˆåœ¨ä¸€èµ·ï¼Œå¹¶ä½¿ç”¨ <code>$avg</code> æ¥è®¡ç®—è¿™äº›æ–‡æ¡£ä¸­ <code>scores</code> å­—æ®µçš„å¹³å‡å€¼ã€‚</li></ol><p>è¿™ä¸ªæ–¹æ³•é€‚ç”¨äºå½“ä½ å¸Œæœ›å¯¹æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ è¿›è¡Œå¤„ç†å¹¶è®¡ç®—å¹³å‡å€¼çš„æƒ…å†µã€‚</p><h3 id=æ–¹æ³•-3ç›´æ¥è®¡ç®—å­—æ®µçš„å¹³å‡å€¼>æ–¹æ³• 3ï¼šç›´æ¥è®¡ç®—å­—æ®µçš„å¹³å‡å€¼</h3><p>å¦‚æœæ•°ç»„å­—æ®µæœ¬èº«å·²ç»åŒ…å«äº†æ‰€æœ‰çš„æ•°å€¼ï¼Œä¸”ä½ åªæƒ³è®¡ç®—è¿™ä¸ªæ•°ç»„å­—æ®µçš„å¹³å‡å€¼ï¼Œè€Œä¸æ˜¯æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå¯ä»¥ç›´æ¥åœ¨ <code>aggregate</code> é˜¶æ®µä¸­è®¡ç®—å¹³å‡å€¼ï¼š</p><h4 id=ç¤ºä¾‹>ç¤ºä¾‹ï¼š</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>collection</span><span class=p>.</span><span class=nx>aggregate</span><span class=p>([</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>    <span class=nx>$project</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>      <span class=nx>averageScore</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$avg</span><span class=o>:</span> <span class=s2>&#34;$scores&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=ln>7</span><span class=cl><span class=p>])</span>
</span></span></code></pre></div><h3 id=æ€»ç»“>æ€»ç»“ï¼š</h3><ul><li><strong><code>$avg</code></strong> ç”¨äºè®¡ç®—ä¸€ä¸ªæ•°å€¼å­—æ®µçš„å¹³å‡å€¼ï¼Œå¯ä»¥ç›´æ¥åœ¨èšåˆç®¡é“ä¸­å¯¹æ•°ç»„å­—æ®µè¿›è¡Œæ“ä½œã€‚</li><li><strong><code>$unwind</code> + <code>$group</code></strong> é€‚ç”¨äºéœ€è¦å°†æ•°ç»„å…ƒç´ åˆ†å¼€å¤„ç†ï¼Œå¹¶æ±‚æ‰€æœ‰å…ƒç´ çš„å¹³å‡å€¼ã€‚</li></ul><p>æ ¹æ®éœ€æ±‚é€‰æ‹©é€‚åˆçš„æ–¹æ³•ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œç›´æ¥ä½¿ç”¨ <code>$avg</code> å¯¹æ•°ç»„å­—æ®µæ±‚å¹³å‡å€¼æœ€ä¸ºç®€å•å’Œé«˜æ•ˆã€‚</p><h2 id=52>52</h2><blockquote><p>ã€€Write a MongoDB query to find the highest score for each restaurant.</p></blockquote><p>è¿™é‡Œç”¨åˆ°äº† <code>$group</code>é˜¶æ®µçš„<code>$max</code>æ“ä½œ</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln> 1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>aggregate</span><span class=p>([{</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>    <span class=nx>$unwind</span><span class=o>:</span> <span class=s2>&#34;$grades&#34;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=nx>$group</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>      <span class=nx>_id</span><span class=o>:</span> <span class=s2>&#34;$name&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>      <span class=nx>highest_score</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=nx>$max</span><span class=o>:</span> <span class=s2>&#34;$grades.score&#34;</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=p>])</span>
</span></span></code></pre></div><h2 id=53>53</h2><blockquote><p>Write a MongoDB query to find the lowest score for each restaurant.</p></blockquote><p>å’Œä¸Šä¸€ä¸ªé¢˜ç›®ä¸€æ ·ï¼Œç”¨<code>$min</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln> 1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>aggregate</span><span class=p>([{</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>    <span class=nx>$unwind</span><span class=o>:</span> <span class=s2>&#34;$grades&#34;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=nx>$group</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>      <span class=nx>_id</span><span class=o>:</span> <span class=s2>&#34;$name&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>      <span class=nx>lowest_score</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=nx>$min</span><span class=o>:</span> <span class=s2>&#34;$grades.score&#34;</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=p>])</span>
</span></span></code></pre></div><h2 id=54>54</h2><blockquote><p>Write a MongoDB query to find the count of restaurants in each borough.</p></blockquote><p>ç”¨åˆ°äº†count</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>aggregate</span><span class=p>([{</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>  <span class=nx>$group</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>    <span class=nx>_id</span><span class=o>:</span> <span class=s2>&#34;$borough&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>    <span class=nx>count</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>      <span class=nx>$sum</span><span class=o>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>7</span><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=ln>8</span><span class=cl><span class=p>}])</span>
</span></span></code></pre></div><h2 id=55>55</h2><blockquote><p>Write a MongoDB query to find the count of restaurants for each cuisine.</p></blockquote><p>åªæ˜¯ç”¨åˆ°äº†<code>$sum</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>aggregate</span><span class=p>([{</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>  <span class=nx>$group</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>    <span class=nx>_id</span><span class=o>:</span> <span class=s2>&#34;$cuisine&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>    <span class=nx>count</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>      <span class=nx>$sum</span><span class=o>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>7</span><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=ln>8</span><span class=cl><span class=p>}])</span>
</span></span></code></pre></div><h2 id=56-å¦‚ä½•æŒ‰ä¸¤ä¸ªå€¼è¿›è¡Œåˆ†ç»„>56 å¦‚ä½•æŒ‰ä¸¤ä¸ªå€¼è¿›è¡Œåˆ†ç»„</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln> 1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>aggregate</span><span class=p>([{</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>  <span class=nx>$group</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>    <span class=nx>_id</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>      <span class=nx>cuisine</span><span class=o>:</span> <span class=s2>&#34;$cuisine&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>      <span class=nx>borough</span><span class=o>:</span> <span class=s2>&#34;$borough&#34;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=nx>count</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>      <span class=nx>$sum</span><span class=o>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=p>}])</span>
</span></span></code></pre></div><h2 id=57-å¤šé˜¶æ®µé…åˆ>57 å¤šé˜¶æ®µé…åˆ</h2><blockquote><p>Write a MongoDB query to find the count of restaurants that received a grade of &lsquo;A&rsquo; for each cuisine.</p></blockquote><p>å¤šé˜¶æ®µ</p><ol><li>unwind</li><li>match</li><li>group</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln> 1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>aggregate</span><span class=p>([</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>    <span class=nx>$unwind</span><span class=o>:</span> <span class=s2>&#34;$grades&#34;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=nx>$match</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;grades.grade&#34;</span><span class=o>:</span> <span class=s2>&#34;A&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=nx>$group</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>      <span class=nx>_id</span><span class=o>:</span> <span class=s2>&#34;$cuisine&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=nx>count</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$sum</span><span class=o>:</span> <span class=mi>1</span> <span class=p>}</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=p>])</span>
</span></span></code></pre></div><h2 id=58-åŒä¸Š>58 åŒä¸Š</h2><blockquote><p>Write a MongoDB query to find the count of restaurants that received a grade of &lsquo;A&rsquo; for each borough.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln> 1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>aggregate</span><span class=p>([</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>    <span class=nx>$unwind</span><span class=o>:</span> <span class=s2>&#34;$grades&#34;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=nx>$match</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;grades.grade&#34;</span><span class=o>:</span> <span class=s2>&#34;A&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=nx>$group</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>      <span class=nx>_id</span><span class=o>:</span> <span class=s2>&#34;$borough&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=nx>count</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$sum</span><span class=o>:</span> <span class=mi>1</span> <span class=p>}</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=p>])</span>
</span></span></code></pre></div><h2 id=59>59</h2><blockquote><p>Write a MongoDB query to find the count of restaurants that received a grade of &lsquo;A&rsquo; for each cuisine and borough.</p></blockquote><p>èšåˆç¡®å®èƒ½è¾¾åˆ°</p><p>è¿™é‡Œæ²¡æœ‰unwind</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln> 1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>aggregate</span><span class=p>([</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>    <span class=nx>$match</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;grades.grade&#34;</span><span class=o>:</span> <span class=s2>&#34;A&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=nx>$group</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>      <span class=nx>_id</span><span class=o>:</span> <span class=p>{</span> <span class=nx>cuisine</span><span class=o>:</span> <span class=s2>&#34;$cuisine&#34;</span><span class=p>,</span> <span class=nx>borough</span><span class=o>:</span> <span class=s2>&#34;$borough&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=nx>count</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$sum</span><span class=o>:</span> <span class=mi>1</span> <span class=p>}</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=nx>$sort</span><span class=o>:</span> <span class=p>{</span> <span class=nx>count</span><span class=o>:</span> <span class=o>-</span><span class=mi>1</span> <span class=p>}</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=p>]);</span>
</span></span></code></pre></div><h2 id=60>60</h2><blockquote><p>Write a MongoDB query to find the number of restaurants that have been graded in each month of the year.</p></blockquote><p>é—®ä¸€å¹´ä¸­ï¼Œæ¯ä¸ªæœˆåˆ†è¯„çº§çš„restaurantsåˆ†åˆ«æœ‰å¤šå°‘ä¸ª,é‚£æ˜¾ç„¶è¦<code>$group</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln> 1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>aggregate</span><span class=p>([</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>    <span class=nx>$unwind</span><span class=o>:</span> <span class=s2>&#34;$grades&#34;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=nx>$project</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=nx>month</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$month</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$toDate</span><span class=o>:</span> <span class=s2>&#34;$grades.date&#34;</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=nx>year</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$year</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$toDate</span><span class=o>:</span> <span class=s2>&#34;$grades.date&#34;</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=nx>$group</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>      <span class=nx>_id</span><span class=o>:</span> <span class=p>{</span> <span class=nx>month</span><span class=o>:</span> <span class=s2>&#34;$month&#34;</span><span class=p>,</span> <span class=nx>year</span><span class=o>:</span> <span class=s2>&#34;$year&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=nx>count</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$sum</span><span class=o>:</span> <span class=mi>1</span> <span class=p>}</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>    <span class=nx>$sort</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>      <span class=s2>&#34;_id.year&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>      <span class=s2>&#34;_id.month&#34;</span><span class=o>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=ln>23</span><span class=cl><span class=p>]);</span>
</span></span></code></pre></div><h2 id=61-66-å¹³å‡åˆ†æœ€é«˜ä½åˆ†>61-66 å¹³å‡åˆ†,æœ€é«˜ä½åˆ†</h2><p>ä¸Šé¢æ±‚è¿‡äº†</p><h2 id=67>67</h2><blockquote><p>Write a MongoDB query to find the name and address of the restaurants that received a grade of &lsquo;A&rsquo; on a specific date</p></blockquote><p>æŸ¥è¯¢ä¸€ä¸ªarrayé‡Œæ»¡è¶³ç‰¹å®šæ¡ä»¶çš„ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln> 1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>    <span class=s2>&#34;grades&#34;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>      <span class=s2>&#34;$elemMatch&#34;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>        <span class=s2>&#34;date&#34;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>          <span class=s2>&#34;$eq&#34;</span><span class=o>:</span> <span class=nx>ISODate</span><span class=p>(</span><span class=s2>&#34;2013-07-22T00:00:00Z&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=s2>&#34;grade&#34;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>          <span class=s2>&#34;$eq&#34;</span><span class=o>:</span> <span class=s2>&#34;A&#34;</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>    <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>    <span class=s2>&#34;address&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=s2>&#34;_id&#34;</span><span class=o>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=ln>19</span><span class=cl><span class=p>)</span>
</span></span></code></pre></div><h2 id=68>68</h2><blockquote><p>Write a MongoDB query to find the name and address of the restaurants that received a grade of &lsquo;B&rsquo; or &lsquo;C&rsquo; on a specific date.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln> 1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>     <span class=s2>&#34;grades&#34;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>       <span class=nx>$elemMatch</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>         <span class=s2>&#34;date&#34;</span><span class=o>:</span> <span class=nx>ISODate</span><span class=p>(</span><span class=s2>&#34;2013-04-05&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>         <span class=s2>&#34;grade&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$in</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&#34;B&#34;</span><span class=p>,</span> <span class=s2>&#34;C&#34;</span> <span class=p>]</span> <span class=p>}</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>       <span class=p>}</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>     <span class=p>}</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>   <span class=p>},</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>     <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>     <span class=s2>&#34;address&#34;</span><span class=o>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=p>)</span>
</span></span></code></pre></div><h2 id=69>69</h2><blockquote><p>Write a MongoDB query to find the name and address of the restaurants that have at least one &lsquo;A&rsquo; grade and one &lsquo;B&rsquo; grade.</p></blockquote><p>å•Šï¼ æŸ¥è¯¢æ•°ç»„é‡Œï¼š è‡³å°‘å«æœ‰ä¸€ä¸ªAï¼Œä¸”è‡³å°‘å«æœ‰ä¸€ä¸ªB ,<code>\exits A in arr \and \exits B in arr</code></p><h2 id=70>70</h2><blockquote><p>Write a MongoDB query to find the name and address of the restaurants that have at least one &lsquo;A&rsquo; grade and no &lsquo;B&rsquo; grades.</p></blockquote><p><code>one A no B</code>.ä¸¤ä¸ªæ¡ä»¶åŒæ—¶æˆç«‹</p><p>no b -> <code>not exits b in Arr</code> -> <code>{$not : { "grades.score" : 'A'}</code></p><p>å’Œæˆ‘æƒ³çš„å·®ä¸å¤š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>({</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>  <span class=nx>$and</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=p>{</span> <span class=s2>&#34;grades.grade&#34;</span><span class=o>:</span> <span class=s2>&#34;A&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=p>{</span> <span class=s2>&#34;grades.grade&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$not</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$eq</span><span class=o>:</span> <span class=s2>&#34;B&#34;</span> <span class=p>}</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=ln>6</span><span class=cl><span class=p>},</span>
</span></span><span class=line><span class=ln>7</span><span class=cl><span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>address</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>_id</span><span class=o>:</span> <span class=mi>0</span> <span class=p>})</span>
</span></span></code></pre></div><h2 id=71>71</h2><blockquote><p>Write a MongoDB query to find the name ,address and grades of the restaurants that have at least one &lsquo;A&rsquo; grade and no &lsquo;C&rsquo; grades.</p></blockquote><p>åŒä¸Š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>({</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>  <span class=nx>$and</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=p>{</span> <span class=s2>&#34;grades.grade&#34;</span><span class=o>:</span> <span class=s2>&#34;A&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=p>{</span> <span class=s2>&#34;grades.grade&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$not</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$eq</span><span class=o>:</span> <span class=s2>&#34;C&#34;</span> <span class=p>}</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=ln>6</span><span class=cl><span class=p>},</span>
</span></span><span class=line><span class=ln>7</span><span class=cl><span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>address</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;grades.grade&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span> <span class=nx>_id</span><span class=o>:</span> <span class=mi>0</span> <span class=p>})</span>
</span></span></code></pre></div><h2 id=72>72</h2><blockquote><p>Write a MongoDB query to find the name, address, and grades of the restaurants that have at least one &lsquo;A&rsquo; grade, no &lsquo;B&rsquo; grades, and no &lsquo;C&rsquo; grades.</p></blockquote><p>åŒä¸Š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>({</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>  <span class=nx>$and</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=p>{</span> <span class=s2>&#34;grades.grade&#34;</span><span class=o>:</span> <span class=s2>&#34;A&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=p>{</span> <span class=s2>&#34;grades.grade&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$not</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$eq</span><span class=o>:</span> <span class=s2>&#34;B&#34;</span> <span class=p>}</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=p>{</span> <span class=s2>&#34;grades.grade&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$not</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$eq</span><span class=o>:</span> <span class=s2>&#34;C&#34;</span> <span class=p>}</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=ln>7</span><span class=cl><span class=p>},</span>
</span></span><span class=line><span class=ln>8</span><span class=cl><span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>address</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;grades.grade&#34;</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span> <span class=nx>_id</span><span class=o>:</span> <span class=mi>0</span> <span class=p>})</span>
</span></span></code></pre></div><h2 id=73>73</h2><blockquote><p>Write a MongoDB query to find the name and address of the restaurants that have the word &lsquo;coffee&rsquo; in their name</p></blockquote><p>æ­£åˆ™</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>({</span> <span class=nx>name</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$regex</span><span class=o>:</span> <span class=sr>/coffee/i</span> <span class=p>}</span> <span class=p>},</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>address</span><span class=o>:</span> <span class=mi>1</span> <span class=p>})</span>
</span></span></code></pre></div><h2 id=74>74</h2><blockquote><p>Write a MongoDB query to find the name and address of the restaurants that have a zipcode that starts with &lsquo;10&rsquo;.</p></blockquote><p>è¿™é‡Œæˆ‘è§‰å¾—å®˜æ–¹ç»™çš„ç­”æ¡ˆä¸å¯¹ã€‚</p><h2 id=75>75</h2><blockquote><p>Write a MongoDB query to find the name and address of the restaurants that have a cuisine that starts with the letter &lsquo;B&rsquo;.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>	<span class=p>{</span> <span class=s2>&#34;cuisine&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$regex</span><span class=o>:</span> <span class=sr>/^B/</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>	<span class=p>{</span> <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>	<span class=s2>&#34;address&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>	<span class=s2>&#34;cuisine&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>	<span class=s2>&#34;_id&#34;</span><span class=o>:</span> <span class=mi>0</span> <span class=p>}</span>
</span></span><span class=line><span class=ln>7</span><span class=cl><span class=p>)</span>
</span></span></code></pre></div><h2 id=76--77-æ­£åˆ™>76 77 æ­£åˆ™</h2><p>æ²¡æœ‰ä»€ä¹ˆå¥½å†™çš„</p><h2 id=78>78</h2><p>æ‰¾æœ€å¤§å€¼ï¼Œé‚£å°±éœ€è¦æ’åº</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln> 1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>aggregate</span><span class=p>([</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>  <span class=p>{</span><span class=nx>$unwind</span><span class=o>:</span> <span class=s2>&#34;$grades&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>  <span class=p>{</span><span class=nx>$group</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=nx>_id</span><span class=o>:</span> <span class=s2>&#34;$restaurant_id&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=nx>avgScore</span><span class=o>:</span> <span class=p>{</span><span class=nx>$avg</span><span class=o>:</span> <span class=s2>&#34;$grades.score&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>  <span class=p>}},</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>  <span class=p>{</span><span class=nx>$sort</span><span class=o>:</span> <span class=p>{</span><span class=nx>avgScore</span><span class=o>:</span> <span class=o>-</span><span class=mi>1</span><span class=p>}},</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>  <span class=p>{</span><span class=nx>$limit</span><span class=o>:</span> <span class=mi>1</span><span class=p>},</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>  <span class=p>{</span><span class=nx>$project</span><span class=o>:</span> <span class=p>{</span><span class=nx>_id</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>avgScore</span><span class=o>:</span> <span class=mi>1</span><span class=p>}}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=p>])</span>
</span></span></code></pre></div><h2 id=79>79</h2><p>æ‰¾æœ€å¤§çš„å€¼Açš„é‚£äº›restaurantsçš„idï¼Œç”¨åˆ°èšåˆ</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln> 1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>aggregate</span><span class=p>([</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>  <span class=p>{</span><span class=nx>$unwind</span><span class=o>:</span> <span class=s2>&#34;$grades&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>  <span class=p>{</span><span class=nx>$match</span><span class=o>:</span> <span class=p>{</span><span class=s2>&#34;grades.grade&#34;</span><span class=o>:</span> <span class=s2>&#34;A&#34;</span><span class=p>}},</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>  <span class=p>{</span><span class=nx>$group</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=nx>_id</span><span class=o>:</span> <span class=s2>&#34;$restaurant_id&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=nx>count</span><span class=o>:</span> <span class=p>{</span><span class=nx>$sum</span><span class=o>:</span> <span class=mi>1</span><span class=p>}</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>  <span class=p>}},</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>  <span class=p>{</span><span class=nx>$sort</span><span class=o>:</span> <span class=p>{</span><span class=nx>count</span><span class=o>:</span> <span class=o>-</span><span class=mi>1</span><span class=p>}},</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>  <span class=p>{</span><span class=nx>$group</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=nx>_id</span><span class=o>:</span> <span class=s2>&#34;$count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=nx>restaurants</span><span class=o>:</span> <span class=p>{</span><span class=nx>$push</span><span class=o>:</span> <span class=s2>&#34;$_id&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>  <span class=p>}},</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>  <span class=p>{</span><span class=nx>$sort</span><span class=o>:</span> <span class=p>{</span><span class=nx>_id</span><span class=o>:</span> <span class=o>-</span><span class=mi>1</span><span class=p>}},</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>  <span class=p>{</span><span class=nx>$limit</span><span class=o>:</span> <span class=mi>1</span><span class=p>},</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>  <span class=p>{</span><span class=nx>$project</span><span class=o>:</span> <span class=p>{</span><span class=nx>restaurants</span><span class=o>:</span> <span class=mi>1</span><span class=p>}}</span>
</span></span><span class=line><span class=ln>16</span><span class=cl><span class=p>])</span>
</span></span></code></pre></div><h2 id=80>80</h2><blockquote><p>Write a MongoDB query to find the cuisine type that is most likely to receive a &lsquo;C&rsquo; grade.</p></blockquote><p>å“ªä¸ªåŒºåŸŸçš„Cæœ€å¤š,ç”¨åˆ°äº†èšåˆ</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>aggregate</span><span class=p>([</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>  <span class=p>{</span><span class=nx>$unwind</span><span class=o>:</span> <span class=s2>&#34;$grades&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>  <span class=p>{</span><span class=nx>$match</span><span class=o>:</span> <span class=p>{</span><span class=s2>&#34;grades.grade&#34;</span><span class=o>:</span> <span class=s2>&#34;C&#34;</span><span class=p>}},</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>  <span class=p>{</span><span class=nx>$group</span><span class=o>:</span> <span class=p>{</span><span class=nx>_id</span><span class=o>:</span> <span class=s2>&#34;$cuisine&#34;</span><span class=p>,</span> <span class=nx>count</span><span class=o>:</span> <span class=p>{</span><span class=nx>$sum</span><span class=o>:</span> <span class=mi>1</span><span class=p>}}},</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>  <span class=p>{</span><span class=nx>$sort</span><span class=o>:</span> <span class=p>{</span><span class=nx>count</span><span class=o>:</span> <span class=o>-</span><span class=mi>1</span><span class=p>}}</span>
</span></span><span class=line><span class=ln>6</span><span class=cl><span class=p>])</span>
</span></span></code></pre></div><h2 id=81>81</h2><blockquote><p>Write a MongoDB query to find the restaurant that has the highest average score for thecuisine &ldquo;Turkish&rdquo;.</p></blockquote><p>èšåˆã€‚</p><h2 id=82>82</h2><blockquote><p>Write a MongoDB query to find the restaurants that achieved the highest total score.</p></blockquote><p>è¿ç»­çš„èšåˆ,èšåˆå°±æ˜¯ä¸€ç§ç®¡é“ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln> 1</span><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>restaurants</span><span class=p>.</span><span class=nx>aggregate</span><span class=p>([</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=p>{</span> <span class=nx>$unwind</span><span class=o>:</span> <span class=s2>&#34;$grades&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=p>{</span> <span class=nx>$group</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=nx>_id</span><span class=o>:</span> <span class=s2>&#34;$name&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=nx>totalScore</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$sum</span><span class=o>:</span> <span class=s2>&#34;$grades.score&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>  <span class=p>}},</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=p>{</span> <span class=nx>$sort</span><span class=o>:</span> <span class=p>{</span> <span class=nx>totalScore</span><span class=o>:</span> <span class=o>-</span><span class=mi>1</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=p>{</span> <span class=nx>$group</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=nx>_id</span><span class=o>:</span> <span class=s2>&#34;$totalScore&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=nx>restaurants</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$push</span><span class=o>:</span> <span class=s2>&#34;$_id&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>  <span class=p>}},</span>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=p>{</span> <span class=nx>$sort</span><span class=o>:</span> <span class=p>{</span> <span class=nx>_id</span><span class=o>:</span> <span class=o>-</span><span class=mi>1</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=p>{</span> <span class=nx>$limit</span><span class=o>:</span> <span class=mi>1</span> <span class=p>},</span>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=p>{</span> <span class=nx>$unwind</span><span class=o>:</span> <span class=s2>&#34;$restaurants&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=p>{</span> <span class=nx>$group</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>    <span class=nx>_id</span><span class=o>:</span> <span class=s2>&#34;$_id&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>17</span><span class=cl><span class=nx>restaurants</span><span class=o>:</span> <span class=p>{</span> <span class=nx>$push</span><span class=o>:</span> <span class=s2>&#34;$restaurants&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>  <span class=p>}}</span>
</span></span><span class=line><span class=ln>19</span><span class=cl><span class=p>])</span>
</span></span></code></pre></div><h2 id=83>83</h2></main><br><footer><div class=footer-info><p>Copyright &copy; 2025 Rainboy. All rights reserved.
<span>| Last build: 2025-09-05 09:08:39</span></p></div><script defer>document.addEventListener("keydown",function(e){if(document.activeElement.isContentEditable)return!1;if(document.activeElement.tagName=="INPUT")return!1;if(e.altKey||e.ctrlKey||e.shiftKey)return!1;var t=e.key;if(t==="h")e.preventDefault(),e.stopPropagation(),window.location.href="/";else if(t==="t")e.preventDefault(),e.stopPropagation(),window.location.href=`https://${location.hostname}/tags`;else if(t==="i"){e.preventDefault(),e.stopPropagation();const t=document.querySelectorAll("input");for(let e=0;e<t.length;e++)if(t[e].offsetParent!==null){t[e].selectionStart=t[e].selectionEnd=t[e].value.length,t[e].focus();break}}return!1})</script><script defer>function throttle(e,t){var n=Date.now();return function(){var s=Date.now();n+t-s<0&&(e(),n=s)}}function scrollHandler(){const e=Array.from(document.querySelectorAll("body h2, body h3"));function t(){for(var n,s,o,i=window.pageYOffset||document.documentElement.scrollTop,t=0;t<e.length;t++)s=e[t].getAttribute("id"),n=document.querySelector('nav ul li a[href="#'+s+'"]'),n&&n.classList.remove("active-toc");for(t=e.length-1;t>=0;t--)if(o=e[t].offsetTop,i>o-75&&(s=e[t].getAttribute("id"),n=document.querySelector('nav ul li a[href="#'+s+'"]'),n)){n.classList.add("active-toc");break}}window.addEventListener("scroll",throttle(t,200))}setTimeout(scrollHandler,100)</script><script defer>function addCopyButtonToCodeBlocks(){const e=document.querySelectorAll('code[class^="language-"]:not(.output):not([class*="language-console"])');e.forEach(e=>{const t=document.createElement("button");t.classList.add("copy-code-button"),t.innerHTML="copy",t.addEventListener("click",()=>{const s=e.querySelectorAll(".cl");let n="";s.forEach(e=>{n+=e.innerText}),navigator.clipboard.writeText(n),t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},1500)}),e.parentNode.before(t)})}setTimeout(function(){addCopyButtonToCodeBlocks()},100)</script><script defer src=/js/theme-switcher.js></script></footer></body></html>