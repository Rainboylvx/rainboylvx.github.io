<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=cache-control content="max-age=0"><meta http-equiv=cache-control content="no-cache"><meta http-equiv=expires content="0"><meta http-equiv=expires content="Tue, 01 Jan 1980 1:00:00 GMT"><meta http-equiv=pragma content="no-cache"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png }><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#1b1b1b"><meta name=description content><script>(function(){const e=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");document.documentElement.setAttribute("data-theme",e)})()</script><title>| Rainboy's Blog</title><style>:root{--background:#ffffff}@media(prefers-color-scheme:dark){:root{--background:#1b1b1b}}html{background-color:var(--background)}body{background-color:var(--background)}</style><link rel=stylesheet type=text/css href=/style.min.ec0f719b913e581207983cf92193a08ecc267bcfa103b18138938c37c3af261a.css media=all><link rel=stylesheet href=/grid.css></head><body><nav><ul class=menu><li><a tabindex=-1 class=menu-link href=/><u>H</u>ome</a></li><li><a tabindex=-1 class=menu-link href=/tags><u>T</u>ags</a></li><li><span style=cursor:pointer id=theme-switcher class=menu-link type=button>ğŸŒ™</span></li></ul></nav><div id=single-header><h1></h1><div id=single-meta></div></div><main><h1 id=åŸºäºtcpçš„æœåŠ¡å™¨ç«¯å®¢æˆ·ç«¯>åŸºäºtcpçš„æœåŠ¡å™¨ç«¯/å®¢æˆ·ç«¯</h1><p>è¯¦ç»†çš„å†…å®¹çœ‹è¿™é‡Œ,æˆ‘å°±ä¸å¤åˆ¶äº†:</p><p><a href=https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch04/README.md target=_blank rel="noreferrer nofollow">https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch04/README.md</a></p><p><p class=imgp><img loading=lazy src=https://camo.githubusercontent.com/270414295465a1c9e1cbd2f105bbd31b2d146d9282b431a8ab53aa369bfd137c/68747470733a2f2f692e6c6f6c692e6e65742f323031392f30312f31342f356333633231383839646230362e706e67 alt></p></p><p>TCP/IP åè®®æ ˆå…±åˆ†ä¸º 4 å±‚ï¼Œå¯ä»¥ç†è§£ä¸ºæ•°æ®æ”¶å‘åˆ†æˆäº† 4 ä¸ªå±‚æ¬¡åŒ–è¿‡ç¨‹ï¼Œé€šè¿‡å±‚æ¬¡åŒ–çš„æ–¹å¼æ¥è§£å†³é—®é¢˜</p><ul><li>é“¾è·¯å±‚: ç‰©ç†å±‚,è´Ÿè´£ç½‘ç»œè®¾å¤‡ä¹‹é—´çš„é€šä¿¡ï¼Œå¦‚ç½‘å¡ã€ç½‘çº¿ç­‰</li><li>IPå±‚: æ•°æ®åŒ…è¿›è¡Œä¸­çº¿é€‰æ‹©</li><li>TCP/UDPå±‚: è´Ÿè´£æ•°æ®åŒ…çš„ä¼ è¾“ï¼Œä¿è¯æ•°æ®åŒ…çš„å¯é æ€§å’Œé¡ºåºæ€§</li></ul><h2 id=å®ç°åŸºäº-tcp-çš„æœåŠ¡å™¨å®¢æˆ·ç«¯>å®ç°åŸºäº TCP çš„æœåŠ¡å™¨/å®¢æˆ·ç«¯</h2><p><p class=imgp><img loading=lazy src=https://camo.githubusercontent.com/69fcf57d2971b632de8b50baeab7039cd018c607363fc5c4f8c80f532362a5db/68747470733a2f2f692e6c6f6c692e6e65742f323031392f30312f31342f356333633237383261373831302e706e67 alt></p></p><p><p class=imgp><img loading=lazy src=https://camo.githubusercontent.com/2ded080eac322e985c4cd748055c169e7e832905497d93d0949fa45c08b69bfb/68747470733a2f2f692e6c6f6c692e6e65742f323031392f30312f31342f356333633331643737653836632e706e67 alt></p></p><h2 id=ä»£ç >ä»£ç :</h2><p>hello_server</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln>1</span><span class=cl><span class=p>{{</span><span class=err>#</span><span class=n>include</span> <span class=n>ch04</span><span class=o>/</span><span class=n>hello_server</span><span class=p>.</span><span class=n>c</span><span class=p>}}</span>
</span></span></code></pre></div><p>ä»£ç : hello_client</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln>1</span><span class=cl><span class=p>{{</span><span class=err>#</span><span class=n>include</span> <span class=n>ch04</span><span class=o>/</span><span class=n>hello_client</span><span class=p>.</span><span class=n>c</span><span class=p>}}</span>
</span></span></code></pre></div><h2 id=echoæœåŠ¡å™¨å®¢æˆ·ç«¯>echoæœåŠ¡å™¨/å®¢æˆ·ç«¯</h2><p>ç¨‹åºè¿è¡Œçš„åŸºæœ¬æ–¹å¼ï¼š</p><ul><li>æœåŠ¡å™¨ç«¯åœ¨åŒä¸€æ—¶åˆ»åªä¸ä¸€ä¸ªå®¢æˆ·ç«¯ç›¸è¿ï¼Œå¹¶æä¾›å›å£°æœåŠ¡ã€‚</li><li>æœåŠ¡å™¨ç«¯ä¾æ¬¡å‘ 5 ä¸ªå®¢æˆ·ç«¯æä¾›æœåŠ¡å¹¶é€€å‡ºã€‚<code>for</code>å¾ªç¯5æ¬¡</li><li>å®¢æˆ·ç«¯æ¥å—ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²å¹¶å‘é€åˆ°æœåŠ¡å™¨ç«¯ã€‚</li><li>æœåŠ¡å™¨ç«¯å°†æ¥å—çš„å­—ç¬¦ä¸²æ•°æ®ä¼ å›å®¢æˆ·ç«¯ï¼Œå³ã€Œå›å£°ã€</li><li>æœåŠ¡å™¨ç«¯ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„å­—ç¬¦ä¸²å›å£°ä¸€ç›´æ‰§è¡Œåˆ°å®¢æˆ·ç«¯è¾“å…¥ Q ä¸ºæ­¢ã€‚</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln>1</span><span class=cl><span class=p>{{</span><span class=err>#</span><span class=n>include</span> <span class=n>ch04</span><span class=o>/</span><span class=n>echo_server</span><span class=p>.</span><span class=n>c</span><span class=p>}}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln>1</span><span class=cl><span class=p>{{</span><span class=err>#</span><span class=n>include</span> <span class=n>ch04</span><span class=o>/</span><span class=n>echo_client</span><span class=p>.</span><span class=n>c</span><span class=p>}}</span>
</span></span></code></pre></div><h2 id=faq>FAQ</h2><p>é—®: æˆ‘åœ¨åœ¨linuxä¸‹ä½¿ç”¨socketè¿›è¡Œtcpç½‘ç»œç¼–ç¨‹,å¦‚æœclientç«¯è°ƒç”¨äº†close(sock)å‡½æ•°,é‚£ä¹ˆserverç«¯å£çš„readå‡½æ•°ä¼šè¯»å–åˆ°ä»€ä¹ˆ?</p><p>ç­”:</p><p>åœ¨Linuxä¸‹ä½¿ç”¨socketè¿›è¡ŒTCPç½‘ç»œç¼–ç¨‹æ—¶,å¦‚æœå®¢æˆ·ç«¯è°ƒç”¨äº†<code>close(sock)</code>å‡½æ•°,æœåŠ¡å™¨ç«¯çš„<code>read</code>å‡½æ•°çš„è¡Œä¸ºå–å†³äºå®¢æˆ·ç«¯å…³é—­è¿æ¥çš„æ–¹å¼å’Œæ—¶æœºã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹,å½“å®¢æˆ·ç«¯è°ƒç”¨<code>close(sock)</code>å‡½æ•°æ—¶,ä¼šå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªFINåŒ…,è¡¨ç¤ºå®¢æˆ·ç«¯æƒ³è¦å…³é—­è¿æ¥ã€‚æœåŠ¡å™¨æ”¶åˆ°FINåŒ…å,ä¼šåšå‡ºä»¥ä¸‹å“åº”:</p><ol><li><p>å¦‚æœæœåŠ¡å™¨å·²ç»è¯»å–äº†æ‰€æœ‰å®¢æˆ·ç«¯å‘é€çš„æ•°æ®,é‚£ä¹ˆ<code>read</code>å‡½æ•°ä¼šè¿”å›0,è¡¨ç¤ºå·²ç»åˆ°è¾¾æ–‡ä»¶æœ«å°¾(EOF)ã€‚è¿™æ„å‘³ç€å®¢æˆ·ç«¯å·²ç»å…³é—­äº†è¿æ¥,å¹¶ä¸”æ²¡æœ‰æ›´å¤šçš„æ•°æ®å¯è¯»ã€‚</p></li><li><p>å¦‚æœæœåŠ¡å™¨è¿˜æ²¡æœ‰è¯»å–å®Œå®¢æˆ·ç«¯å‘é€çš„æ‰€æœ‰æ•°æ®,é‚£ä¹ˆ<code>read</code>å‡½æ•°ä¼šç»§ç»­è¯»å–å‰©ä½™çš„æ•°æ®,ç›´åˆ°è¯»å–å®Œæ‰€æœ‰æ•°æ®æˆ–è€…é‡åˆ°é”™è¯¯ä¸ºæ­¢ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹,<code>read</code>å‡½æ•°ä¼šè¿”å›å®é™…è¯»å–åˆ°çš„å­—èŠ‚æ•°ã€‚å½“æ‰€æœ‰æ•°æ®è¯»å–å®Œæ¯•å,å†æ¬¡è°ƒç”¨<code>read</code>å‡½æ•°ä¼šè¿”å›0,è¡¨ç¤ºå·²ç»åˆ°è¾¾æ–‡ä»¶æœ«å°¾(EOF)ã€‚</p></li><li><p>å¦‚æœå®¢æˆ·ç«¯åœ¨å‘é€æ•°æ®çš„è¿‡ç¨‹ä¸­çªç„¶å…³é—­äº†è¿æ¥,é‚£ä¹ˆæœåŠ¡å™¨çš„<code>read</code>å‡½æ•°å¯èƒ½ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯,é€šå¸¸æ˜¯<code>ECONNRESET</code>é”™è¯¯,è¡¨ç¤ºè¿æ¥è¢«é‡ç½®ã€‚</p></li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯,å¦‚æœå®¢æˆ·ç«¯åœ¨å…³é—­è¿æ¥ä¹‹å‰æ²¡æœ‰å‘é€æ‰€æœ‰çš„æ•°æ®,é‚£ä¹ˆæœåŠ¡å™¨å¯èƒ½ä¼šä¸¢å¤±ä¸€éƒ¨åˆ†æ•°æ®ã€‚ä¸ºäº†ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§,é€šå¸¸å»ºè®®åœ¨å…³é—­è¿æ¥ä¹‹å‰,å…ˆè°ƒç”¨<code>shutdown(sock, SHUT_WR)</code>å‡½æ•°,å‘Šè¯‰æ“ä½œç³»ç»Ÿä¸å†å‘é€æ•°æ®,ç„¶åå†è°ƒç”¨<code>close(sock)</code>å‡½æ•°å…³é—­è¿æ¥ã€‚</p><p>æ€»ä¹‹,æœåŠ¡å™¨ç«¯çš„<code>read</code>å‡½æ•°åœ¨å®¢æˆ·ç«¯å…³é—­è¿æ¥æ—¶çš„è¡Œä¸ºå–å†³äºå…·ä½“çš„æƒ…å†µ:</p><ul><li>å¦‚æœå®¢æˆ·ç«¯å‘é€äº†æ‰€æœ‰æ•°æ®å¹¶å…³é—­è¿æ¥,<code>read</code>å‡½æ•°ä¼šè¿”å›0,è¡¨ç¤ºEOFã€‚</li><li>å¦‚æœå®¢æˆ·ç«¯å…³é—­è¿æ¥æ—¶è¿˜æœ‰æœªè¯»å–çš„æ•°æ®,<code>read</code>å‡½æ•°ä¼šç»§ç»­è¯»å–å‰©ä½™æ•°æ®,ç›´åˆ°è¯»å–å®Œæ¯•,ç„¶åè¿”å›0,è¡¨ç¤ºEOFã€‚</li><li>å¦‚æœå®¢æˆ·ç«¯å¼‚å¸¸å…³é—­è¿æ¥,<code>read</code>å‡½æ•°å¯èƒ½ä¼šè¿”å›é”™è¯¯,å¦‚<code>ECONNRESET</code>ã€‚</li></ul><p>ä½œä¸ºæœåŠ¡å™¨ç«¯,éœ€è¦æ­£ç¡®å¤„ç†è¿™äº›ä¸åŒçš„æƒ…å†µ,ä»¥ç¡®ä¿ç¨‹åºçš„æ­£ç¡®æ€§å’Œé²æ£’æ€§ã€‚</p><p>é—®: å¦‚ä½•æ£€æµ‹åˆ° readå‡½æ•°è¿”å›ä¸€ä¸ªé”™è¯¯, ä¾‹å¦‚æ˜¯ECONNRESET?</p><p>åœ¨Linuxç³»ç»Ÿä¸­,å½“<code>read</code>å‡½æ•°è¿”å›é”™è¯¯æ—¶,ä¼šè®¾ç½®å…¨å±€å˜é‡<code>errno</code>æ¥æŒ‡ç¤ºå…·ä½“çš„é”™è¯¯ç±»å‹ã€‚ä½ å¯ä»¥é€šè¿‡æ£€æŸ¥<code>errno</code>çš„å€¼æ¥åˆ¤æ–­æ˜¯å¦å‘ç”Ÿäº†<code>ECONNRESET</code>é”™è¯¯ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ,æ¼”ç¤ºäº†å¦‚ä½•æ£€æµ‹<code>read</code>å‡½æ•°è¿”å›çš„é”™è¯¯:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln> 1</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdlib.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;unistd.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;errno.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;string.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=cp></span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=kt>ssize_t</span> <span class=nf>read_data</span><span class=p>(</span><span class=kt>int</span> <span class=n>sockfd</span><span class=p>,</span> <span class=kt>void</span> <span class=o>*</span><span class=n>buf</span><span class=p>,</span> <span class=kt>size_t</span> <span class=n>len</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=kt>ssize_t</span> <span class=n>num_read</span> <span class=o>=</span> <span class=nf>read</span><span class=p>(</span><span class=n>sockfd</span><span class=p>,</span> <span class=n>buf</span><span class=p>,</span> <span class=n>len</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>num_read</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>errno</span> <span class=o>==</span> <span class=n>ECONNRESET</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>            <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Connection reset by peer</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>            <span class=nf>perror</span><span class=p>(</span><span class=s>&#34;read&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=k>return</span> <span class=n>num_read</span><span class=p>;</span>
</span></span><span class=line><span class=ln>18</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­,<code>read_data</code>å‡½æ•°å°è£…äº†<code>read</code>å‡½æ•°çš„è°ƒç”¨ã€‚å®ƒæ£€æŸ¥<code>read</code>å‡½æ•°çš„è¿”å›å€¼:</p><ul><li>å¦‚æœè¿”å›å€¼ä¸º-1,è¡¨ç¤ºå‘ç”Ÿäº†é”™è¯¯ã€‚æ­¤æ—¶,é€šè¿‡æ£€æŸ¥<code>errno</code>çš„å€¼æ¥åˆ¤æ–­å…·ä½“çš„é”™è¯¯ç±»å‹:<ul><li>å¦‚æœ<code>errno</code>çš„å€¼ç­‰äº<code>ECONNRESET</code>,è¡¨ç¤ºè¿æ¥è¢«å¯¹ç«¯é‡ç½®,å¯ä»¥è¾“å‡ºç›¸åº”çš„é”™è¯¯ä¿¡æ¯ã€‚</li><li>å¦åˆ™,å¯ä»¥ä½¿ç”¨<code>perror</code>å‡½æ•°è¾“å‡ºé”™è¯¯ä¿¡æ¯,<code>perror</code>å‡½æ•°ä¼šæ ¹æ®<code>errno</code>çš„å€¼è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„é”™è¯¯æè¿°ã€‚</li></ul></li><li>å¦‚æœè¿”å›å€¼ä¸ä¸º-1,è¡¨ç¤ºè¯»å–æˆåŠŸ,å‡½æ•°è¿”å›å®é™…è¯»å–åˆ°çš„å­—èŠ‚æ•°ã€‚</li></ul><p>åœ¨å®é™…ä½¿ç”¨æ—¶,ä½ å¯ä»¥æ ¹æ®éœ€è¦å¯¹<code>read_data</code>å‡½æ•°è¿›è¡Œè°ƒç”¨,å¹¶æ ¹æ®è¿”å›å€¼è¿›è¡Œç›¸åº”çš„å¤„ç†:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln>1</span><span class=cl><span class=kt>char</span> <span class=n>buffer</span><span class=p>[</span><span class=mi>1024</span><span class=p>];</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=kt>ssize_t</span> <span class=n>num_read</span> <span class=o>=</span> <span class=nf>read_data</span><span class=p>(</span><span class=n>sockfd</span><span class=p>,</span> <span class=n>buffer</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>buffer</span><span class=p>));</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>num_read</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>    <span class=c1>// å¤„ç†é”™è¯¯æƒ…å†µ
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=c1></span><span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>num_read</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>    <span class=c1>// å¤„ç†è¿æ¥å…³é—­çš„æƒ…å†µ
</span></span></span><span class=line><span class=ln>7</span><span class=cl><span class=c1></span><span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>8</span><span class=cl>    <span class=c1>// å¤„ç†æˆåŠŸè¯»å–æ•°æ®çš„æƒ…å†µ
</span></span></span><span class=line><span class=ln>9</span><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><p>é€šè¿‡æ£€æŸ¥<code>read_data</code>å‡½æ•°çš„è¿”å›å€¼,ä½ å¯ä»¥åˆ¤æ–­æ˜¯å¦å‘ç”Ÿäº†é”™è¯¯,å¹¶æ ¹æ®å…·ä½“çš„é”™è¯¯ç±»å‹é‡‡å–ç›¸åº”çš„å¤„ç†æªæ–½ã€‚</p><p>æ€»ä¹‹,é€šè¿‡æ£€æŸ¥<code>read</code>å‡½æ•°çš„è¿”å›å€¼å’Œ<code>errno</code>çš„å€¼,ä½ å¯ä»¥æ£€æµ‹å¹¶å¤„ç†<code>read</code>å‡½æ•°è¿”å›çš„é”™è¯¯,åŒ…æ‹¬<code>ECONNRESET</code>é”™è¯¯ã€‚è¿™æ ·å¯ä»¥å¢å¼ºç¨‹åºçš„å¥å£®æ€§å’Œå¯é æ€§ã€‚</p></main><br><footer><div class=footer-info><p>Copyright &copy; 2025 Rainboy. All rights reserved.
<span>| Last build: 2025-09-05 08:39:38</span></p></div><script defer>document.addEventListener("keydown",function(e){if(document.activeElement.isContentEditable)return!1;if(document.activeElement.tagName=="INPUT")return!1;if(e.altKey||e.ctrlKey||e.shiftKey)return!1;var t=e.key;if(t==="h")e.preventDefault(),e.stopPropagation(),window.location.href="/";else if(t==="t")e.preventDefault(),e.stopPropagation(),window.location.href=`https://${location.hostname}/tags`;else if(t==="i"){e.preventDefault(),e.stopPropagation();const t=document.querySelectorAll("input");for(let e=0;e<t.length;e++)if(t[e].offsetParent!==null){t[e].selectionStart=t[e].selectionEnd=t[e].value.length,t[e].focus();break}}return!1})</script><script defer>function throttle(e,t){var n=Date.now();return function(){var s=Date.now();n+t-s<0&&(e(),n=s)}}function scrollHandler(){const e=Array.from(document.querySelectorAll("body h2, body h3"));function t(){for(var n,s,o,i=window.pageYOffset||document.documentElement.scrollTop,t=0;t<e.length;t++)s=e[t].getAttribute("id"),n=document.querySelector('nav ul li a[href="#'+s+'"]'),n&&n.classList.remove("active-toc");for(t=e.length-1;t>=0;t--)if(o=e[t].offsetTop,i>o-75&&(s=e[t].getAttribute("id"),n=document.querySelector('nav ul li a[href="#'+s+'"]'),n)){n.classList.add("active-toc");break}}window.addEventListener("scroll",throttle(t,200))}setTimeout(scrollHandler,100)</script><script defer>function addCopyButtonToCodeBlocks(){const e=document.querySelectorAll('code[class^="language-"]:not(.output):not([class*="language-console"])');e.forEach(e=>{const t=document.createElement("button");t.classList.add("copy-code-button"),t.innerHTML="copy",t.addEventListener("click",()=>{const s=e.querySelectorAll(".cl");let n="";s.forEach(e=>{n+=e.innerText}),navigator.clipboard.writeText(n),t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},1500)}),e.parentNode.before(t)})}setTimeout(function(){addCopyButtonToCodeBlocks()},100)</script><script defer src=/js/theme-switcher.js></script></footer></body></html>