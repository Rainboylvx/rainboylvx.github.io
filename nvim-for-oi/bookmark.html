<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=cache-control content="max-age=0"><meta http-equiv=cache-control content="no-cache"><meta http-equiv=expires content="0"><meta http-equiv=expires content="Tue, 01 Jan 1980 1:00:00 GMT"><meta http-equiv=pragma content="no-cache"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png }><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#1b1b1b"><meta name=description content="bookmark"><script>(function(){const e=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");document.documentElement.setAttribute("data-theme",e)})()</script><title>bookmark | Rainboy's Blog</title><style>:root{--background:#ffffff}@media(prefers-color-scheme:dark){:root{--background:#1b1b1b}}html{background-color:var(--background)}body{background-color:var(--background)}</style><link rel=stylesheet type=text/css href=/style.min.4de9e3236bcb55312d0b2ff0fc62c694f607b9c0d95d0621f6c6dbacb7d6dbb5.css media=all><link rel=stylesheet href=/grid.css><link href="https://fonts.font.im/css?family=Roboto+Mono" rel=stylesheet><style>body,.heti,.heti--sans{font-family:roboto mono,monospace,times new roman,times,heti song,serif,apple color emoji,segoe ui emoji,segoe ui symbol}</style></head><body><nav><ul class=menu><li><a tabindex=-1 class=menu-link href=/><u>H</u>ome</a></li><li><a tabindex=-1 class=menu-link href=/tags><u>T</u>ags</a></li><li><span style=cursor:pointer id=theme-switcher class=menu-link type=button><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon h-4 w-4"><path d="M12 3a6 6 0 009 9 9 9 0 11-9-9z"/></svg></span></li></ul></nav><div id=single-header><h1>bookmark</h1><div id=single-meta><span class=datesub>2025-09-09 00:00</span>
<span id=tags>&nbsp;&nbsp;
<span><a href=https://hugo-dead-simple.netlify.com/tags/nvim.html>#nvim</a>
</span>&nbsp; <span><a href=https://hugo-dead-simple.netlify.com/tags/oi.html>#oi</a>
</span>&nbsp;</span></div></div><aside class="hidden lg:block toc" id=tableOfContentContainer><nav id=TableOfContents><ul><li><ul><li><a href=#1-neovim-的内置标记-built-in-marks>1 Neovim 的内置标记 (Built-in Marks)</a></li><li><a href=#2-插件推荐>2 插件推荐</a></li><li><a href=#总结与如何选择>总结与如何选择</a></li></ul></li></ul></nav></aside><main class="heti heti--classic"><p>当然，为代码行添加标记（通常称为“书签”或“Bookmarks”）以便快速导航是一个非常常见的需求。Neovim 不仅有强大的内置标记功能，还有许多优秀的插件可以极大地增强这一体验。</p><h3 id=1-neovim-的内置标记-built-in-marks>1 Neovim 的内置标记 (Built-in Marks)</h3><p>首先，你需要了解 Neovim 自带的、无需任何插件的标记功能。它非常强大和快速。</p><ul><li><p><strong>文件内标记 (Lowercase Marks):</strong></p><ul><li><code>m{a-z}</code>: 在当前光标行创建一个名为 <code>{char}</code> 的标记。例如，<code>ma</code> 会在当前行创建一个名为 &lsquo;a&rsquo; 的标记。这些标记只在当前文件中有效。</li><li><code>`a</code> 或 <code>'a</code>: 跳转到标记 &lsquo;a&rsquo;。<ul><li><code>`a</code> (反引号) 会跳转到标记所在行的<strong>确切光标位置</strong>。</li><li><code>'a</code> (单引号) 会跳转到标记所在行的<strong>行首</strong>。</li></ul></li></ul></li><li><p><strong>全局标记 (Uppercase Marks):</strong></p><ul><li><code>m{A-Z}</code>: 创建一个全局标记。例如，<code>mA</code>。这些标记在多个文件之间都有效（只要 Neovim 会话还在），并且会记录文件路径。</li><li><code>`A</code> 或 <code>'A</code>: 从任何文件跳转到标记 &lsquo;A&rsquo; 所在的位置。</li></ul></li><li><p><strong>查看所有标记:</strong></p><ul><li>输入命令 <code>:marks</code> 可以查看所有已设置的标记。</li></ul></li></ul><p><strong>优点:</strong> 内置，速度极快，无需配置。
<strong>缺点:</strong> 标记是<strong>不可见</strong>的，你必须记住你把哪个标记放在了哪里，或者通过 <code>:marks</code> 命令查看。</p><hr><h3 id=2-插件推荐>2 插件推荐</h3><p>为了解决内置标记不可见的问题，社区开发了许多插件，它们通常会在带有标记的行旁边添加一个“符号”或“图标”，并提供更友好的交互方式。</p><h4 id=-首选推荐-marksnvim>👑 首选推荐: marks.nvim</h4><p><strong>链接:</strong> <a href=https://github.com/chentoast/marks.nvim target=_blank rel=noopener>chentoast/marks.nvim</a></p><p>这是一个现代化的 Neovim 插件，专门用于<strong>增强内置的 marks 功能</strong>。它会让你的内置标记变得可见，并添加了许多方便的功能，是目前最优雅的解决方案之一。</p><p><strong>特点:</strong></p><ul><li><strong>可视化:</strong> 在行号列或符号列为你设置的标记添加图标。</li><li><strong>无缝集成:</strong> 它操作的仍然是 Neovim 的原生 marks，所以你依然可以使用 <code>ma</code> 和 <code>'a</code> 等命令。</li><li><strong>快速导航:</strong> 提供了在标记之间循环跳转的命令。</li><li><strong>Telescope 集成:</strong> 可以用 Telescope 模糊搜索并跳转到所有标记。</li><li><strong>持久化:</strong> 可以跨会话保存标记。</li></ul><p><strong>使用 <code>lazy.nvim</code> 的安装配置示例:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=ln> 1</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>  <span class=s2>&#34;chentoast/marks.nvim&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>  <span class=n>event</span> <span class=o>=</span> <span class=s2>&#34;BufReadPost&#34;</span><span class=p>,</span> <span class=c1>-- 优化启动速度</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>  <span class=n>config</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=n>require</span><span class=p>(</span><span class=s1>&#39;marks&#39;</span><span class=p>).</span><span class=n>setup</span><span class=p>({</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>      <span class=c1>-- 默认标记，你可以自定义</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>      <span class=n>default_mappings</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>      <span class=c1>-- 你可以在这里进行详细配置</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>      <span class=c1>-- 比如自定义图标、颜色等</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>  <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>默认情况下，它会映射一些快捷键，例如：</p><ul><li><code>m,</code>: 在当前行设置/取消下一个可用标记。</li><li><code>m[</code> / <code>m]</code>: 在标记之间向前/向后跳转。</li></ul><h4 id=-流程驱动的选择-harpoon>🚀 流程驱动的选择: harpoon</h4><p><strong>链接:</strong> <a href=https://github.com/ThePrimeagen/harpoon target=_blank rel=noopener>ThePrimeagen/harpoon</a></p><p>Harpoon 的理念略有不同。它不只是一个简单的书签系统，而是一个面向工作流的“快速访问列表”。你可以把任何文件中的任何位置“钉”到 Harpoon 列表中，然后通过索引或快捷键在这个列表之间快速穿梭。</p><p><strong>特点:</strong></p><ul><li><strong>任务列表:</strong> 非常适合在一个任务中，你需要在几个关键位置之间反复横跳的场景。</li><li><strong>UI 菜单:</strong> 提供一个浮动窗口来管理你的 Harpoon 列表。</li><li><strong>极其快速:</strong> 切换速度非常快。</li></ul><p><strong>使用 <code>lazy.nvim</code> 的安装配置示例:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=ln> 1</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>  <span class=s2>&#34;ThePrimeagen/harpoon&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>  <span class=n>branch</span> <span class=o>=</span> <span class=s2>&#34;harpoon2&#34;</span><span class=p>,</span> <span class=c1>-- 推荐使用 harpoon2 分支</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>  <span class=n>dependencies</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&#34;nvim-lua/plenary.nvim&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>  <span class=n>config</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=kd>local</span> <span class=n>harpoon</span> <span class=o>=</span> <span class=n>require</span><span class=p>(</span><span class=s2>&#34;harpoon&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=n>harpoon</span><span class=p>:</span><span class=n>setup</span><span class=p>({})</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=c1>-- 基础快捷键绑定</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=n>vim.keymap</span><span class=p>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&#34;n&#34;</span><span class=p>,</span> <span class=s2>&#34;&lt;leader&gt;a&#34;</span><span class=p>,</span> <span class=kr>function</span><span class=p>()</span> <span class=n>harpoon</span><span class=p>:</span><span class=n>list</span><span class=p>():</span><span class=n>add</span><span class=p>()</span> <span class=kr>end</span><span class=p>,</span> <span class=p>{</span> <span class=n>desc</span> <span class=o>=</span> <span class=s2>&#34;Harpoon add file&#34;</span> <span class=p>})</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=n>vim.keymap</span><span class=p>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&#34;n&#34;</span><span class=p>,</span> <span class=s2>&#34;&lt;C-e&gt;&#34;</span><span class=p>,</span> <span class=kr>function</span><span class=p>()</span> <span class=n>harpoon.ui</span><span class=p>:</span><span class=n>toggle_quick_menu</span><span class=p>(</span><span class=n>harpoon</span><span class=p>:</span><span class=n>list</span><span class=p>())</span> <span class=kr>end</span><span class=p>,</span> <span class=p>{</span> <span class=n>desc</span> <span class=o>=</span> <span class=s2>&#34;Harpoon quick menu&#34;</span> <span class=p>})</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=n>vim.keymap</span><span class=p>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&#34;n&#34;</span><span class=p>,</span> <span class=s2>&#34;&lt;C-h&gt;&#34;</span><span class=p>,</span> <span class=kr>function</span><span class=p>()</span> <span class=n>harpoon</span><span class=p>:</span><span class=n>list</span><span class=p>():</span><span class=n>select</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span> <span class=kr>end</span><span class=p>,</span> <span class=p>{</span> <span class=n>desc</span> <span class=o>=</span> <span class=s2>&#34;Harpoon to file 1&#34;</span> <span class=p>})</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>    <span class=n>vim.keymap</span><span class=p>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&#34;n&#34;</span><span class=p>,</span> <span class=s2>&#34;&lt;C-t&gt;&#34;</span><span class=p>,</span> <span class=kr>function</span><span class=p>()</span> <span class=n>harpoon</span><span class=p>:</span><span class=n>list</span><span class=p>():</span><span class=n>select</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span> <span class=kr>end</span><span class=p>,</span> <span class=p>{</span> <span class=n>desc</span> <span class=o>=</span> <span class=s2>&#34;Harpoon to file 2&#34;</span> <span class=p>})</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>    <span class=n>vim.keymap</span><span class=p>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&#34;n&#34;</span><span class=p>,</span> <span class=s2>&#34;&lt;C-n&gt;&#34;</span><span class=p>,</span> <span class=kr>function</span><span class=p>()</span> <span class=n>harpoon</span><span class=p>:</span><span class=n>list</span><span class=p>():</span><span class=n>select</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span> <span class=kr>end</span><span class=p>,</span> <span class=p>{</span> <span class=n>desc</span> <span class=o>=</span> <span class=s2>&#34;Harpoon to file 3&#34;</span> <span class=p>})</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>    <span class=n>vim.keymap</span><span class=p>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&#34;n&#34;</span><span class=p>,</span> <span class=s2>&#34;&lt;C-s&gt;&#34;</span><span class=p>,</span> <span class=kr>function</span><span class=p>()</span> <span class=n>harpoon</span><span class=p>:</span><span class=n>list</span><span class=p>():</span><span class=n>select</span><span class=p>(</span><span class=mi>4</span><span class=p>)</span> <span class=kr>end</span><span class=p>,</span> <span class=p>{</span> <span class=n>desc</span> <span class=o>=</span> <span class=s2>&#34;Harpoon to file 4&#34;</span> <span class=p>})</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>  <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=ln>18</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><hr><h3 id=总结与如何选择>总结与如何选择</h3><table><thead><tr><th style=text-align:left>方案</th><th style=text-align:left>哲学</th><th style=text-align:left>优点</th><th style=text-align:left>适合场景</th></tr></thead><tbody><tr><td style=text-align:left><strong>内置 Marks</strong></td><td style=text-align:left>基础功能</td><td style=text-align:left>零开销，极速</td><td style=text-align:left>临时、一次性的快速跳转，不想安装额外插件。</td></tr><tr><td style=text-align:left><strong>marks.nvim</strong></td><td style=text-align:left><strong>增强内置</strong></td><td style=text-align:left><strong>可视化</strong>，功能全面，与原生命令结合好</td><td style=text-align:left>想要一个经典、强大、可视化的“书签”系统，让代码标记一目了然。</td></tr><tr><td style=text-align:left><strong>harpoon</strong></td><td style=text-align:left><strong>工作流列表</strong></td><td style=text-align:left>任务导向，在少量固定位置间切换极其高效</td><td style=text-align:left>在重构或调试时，需要在几个（通常是2-5个）关键代码点之间高频切换。</td></tr></tbody></table><p><strong>我的建议是：</strong></p><blockquote><p>从 <strong><code>marks.nvim</code></strong> 开始。它最符合你“添加 mark 并快速跳转”的直接需求，并且通过可视化极大地改进了 Neovim 的原生功能，学习成本很低。</p><p>如果你发现你的工作模式经常是围绕少数几个“热点”位置展开，那么再尝试 <strong><code>harpoon</code></strong>，它可能会极大地提升你的工作效率。</p></blockquote></main><br><footer><div class=footer-info><p>Copyright &copy; 2025 Rainboy. All rights reserved.
<span>| Last build: 2025-10-23 16:51:53</span></p></div><script defer>document.addEventListener("keydown",function(e){if(document.activeElement.isContentEditable)return!1;if(document.activeElement.tagName=="INPUT")return!1;if(e.altKey||e.ctrlKey||e.shiftKey)return!1;var t=e.key;if(t==="h")e.preventDefault(),e.stopPropagation(),window.location.href="/";else if(t==="t")e.preventDefault(),e.stopPropagation(),window.location.href=`https://${location.hostname}/tags`;else if(t==="i"){e.preventDefault(),e.stopPropagation();const t=document.querySelectorAll("input");for(let e=0;e<t.length;e++)if(t[e].offsetParent!==null){t[e].selectionStart=t[e].selectionEnd=t[e].value.length,t[e].focus();break}}return!1})</script><script defer>function throttle(e,t){var n=Date.now();return function(){var s=Date.now();n+t-s<0&&(e(),n=s)}}function scrollHandler(){const e=Array.from(document.querySelectorAll("body h2, body h3"));function t(){for(var n,s,o,i=window.pageYOffset||document.documentElement.scrollTop,t=0;t<e.length;t++)s=e[t].getAttribute("id"),n=document.querySelector('nav ul li a[href="#'+s+'"]'),n&&n.classList.remove("active-toc");for(t=e.length-1;t>=0;t--)if(o=e[t].offsetTop,i>o-75&&(s=e[t].getAttribute("id"),n=document.querySelector('nav ul li a[href="#'+s+'"]'),n)){n.classList.add("active-toc");break}}window.addEventListener("scroll",throttle(t,200))}setTimeout(scrollHandler,100)</script><script defer>function addCopyButtonToCodeBlocks(){const e=document.querySelectorAll('code[class^="language-"]:not(.output):not([class*="language-console"])');e.forEach(e=>{const t=document.createElement("button");t.classList.add("copy-code-button"),t.innerHTML="copy",t.addEventListener("click",()=>{const s=e.querySelectorAll(".cl");let n="";s.forEach(e=>{n+=e.innerText}),navigator.clipboard.writeText(n),t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},1500)}),e.parentNode.before(t)})}setTimeout(function(){addCopyButtonToCodeBlocks()},100)</script><script defer src=/js/theme-switcher.js></script></footer></body></html>