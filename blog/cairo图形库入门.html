<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=cache-control content="max-age=0"><meta http-equiv=cache-control content="no-cache"><meta http-equiv=expires content="0"><meta http-equiv=expires content="Tue, 01 Jan 1980 1:00:00 GMT"><meta http-equiv=pragma content="no-cache"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png }><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#1b1b1b"><meta name=description content="cairo图形库入门"><script>(function(){const e=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");document.documentElement.setAttribute("data-theme",e)})()</script><title>cairo图形库入门 | Rainboy's Blog</title><style>:root{--background:#ffffff}@media(prefers-color-scheme:dark){:root{--background:#1b1b1b}}html{background-color:var(--background)}body{background-color:var(--background)}</style><link rel=stylesheet type=text/css href=/style.min.4de9e3236bcb55312d0b2ff0fc62c694f607b9c0d95d0621f6c6dbacb7d6dbb5.css media=all><link rel=stylesheet href=/grid.css><link href="https://fonts.font.im/css?family=Roboto+Mono" rel=stylesheet><style>body,.heti,.heti--sans{font-family:roboto mono,monospace,times new roman,times,heti song,serif,apple color emoji,segoe ui emoji,segoe ui symbol}</style></head><body><nav><ul class=menu><li><a tabindex=-1 class=menu-link href=/><u>H</u>ome</a></li><li><a tabindex=-1 class=menu-link href=/tags><u>T</u>ags</a></li><li><span style=cursor:pointer id=theme-switcher class=menu-link type=button><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon h-4 w-4"><path d="M12 3a6 6 0 009 9 9 9 0 11-9-9z"/></svg></span></li></ul></nav><div id=single-header><h1>cairo图形库入门</h1><div id=single-meta><span class=datesub>2025-09-10 00:00</span>
<span id=tags>&nbsp;&nbsp;
<span><a href=https://hugo-dead-simple.netlify.com/tags/c++.html>#c++</a>
</span>&nbsp; <span><a href=https://hugo-dead-simple.netlify.com/tags/cairo.html>#cairo</a>
</span>&nbsp; <span><a href=https://hugo-dead-simple.netlify.com/tags/%E5%9B%BE%E5%BD%A2%E5%AD%A6.html>#%E5%9B%BE%E5%BD%A2%E5%AD%A6</a>
</span>&nbsp; <span><a href=https://hugo-dead-simple.netlify.com/tags/%E6%95%99%E7%A8%8B.html>#%E6%95%99%E7%A8%8B</a>
</span>&nbsp;</span></div></div><aside class="hidden lg:block toc" id=tableOfContentContainer><nav id=TableOfContents><ul><li><a href=#cairo图形库入门用c绘制优雅的2d矢量图形>Cairo图形库入门：用C++绘制优雅的2D矢量图形</a><ul><li><a href=#什么是-cairo>什么是 Cairo？</a></li><li><a href=#安装与配置>安装与配置</a></li><li><a href=#cairo-的核心概念>Cairo 的核心概念</a></li><li><a href=#第一个程序绘制基本图形>第一个程序：绘制基本图形</a></li><li><a href=#进阶技巧>进阶技巧</a></li><li><a href=#实际应用示例绘制一个简单的房子场景>实际应用示例：绘制一个简单的房子场景</a></li><li><a href=#结论与后续学习>结论与后续学习</a></li></ul></li></ul></nav></aside><main class="heti heti--classic"><h2 id=cairo图形库入门用c绘制优雅的2d矢量图形>Cairo图形库入门：用C++绘制优雅的2D矢量图形</h2><p><strong>摘要：</strong> 本文是一篇针对初学者的 Cairo 入门教程，将带你从零开始，学习如何使用这个强大而优雅的2D图形库，通过C++语言创建高质量的矢量图形。</p><h3 id=什么是-cairo>什么是 Cairo？</h3><p>Cairo 是一个开源的2D图形库，它提供了一套强大而灵活的API，用于创建高质量的<strong>矢量图形</strong>。与依赖像素的<strong>位图</strong>不同，矢量图形基于数学方程，这意味着你可以在不损失任何清晰度的情况下，任意缩放、旋转或变换图形。</p><p><strong>为什么选择 Cairo？</strong></p><ul><li><strong>高质量输出</strong>：无论是生成用于打印的 PDF，还是用于网页的 SVG，Cairo 都能确保图形边缘平滑、无锯齿。</li><li><strong>多格式支持</strong>：一次编写，多处渲染。Cairo 支持多种输出目标（称为 “Surface”），包括 PNG 图片、PDF、SVG、PostScript，甚至直接渲染到窗口。</li><li><strong>跨平台</strong>：作为业界标准之一，Cairo 在 Linux、macOS 和 Windows 上都能完美运行。</li><li><strong>丰富的语言绑定</strong>：虽然核心库用 C 语言编写，但它拥有 C++、Python、Rust、Go 等多种语言的绑定，让你可以在自己喜欢的开发环境中使用。</li></ul><h3 id=安装与配置>安装与配置</h3><p>在开始之前，你需要安装 Cairo 的开发库。</p><p><strong>在 Linux (Ubuntu/Debian) 上：</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>sudo apt-get install libcairo2-dev
</span></span></code></pre></div><p><strong>在 macOS 上 (使用 Homebrew)：</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>brew install cairo
</span></span></code></pre></div><p><strong>在 Windows 上 (使用 vcpkg)：</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>vcpkg install cairo
</span></span></code></pre></div><p>安装完成后，你需要告诉编译器如何找到 Cairo 的头文件和库。<code>pkg-config</code> 是一个能帮你自动完成这项工作的利器：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=c1># 这条命令会输出编译和链接所需的全部参数</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>g++ your_program.cpp -o your_program <span class=sb>`</span>pkg-config --cflags --libs cairo<span class=sb>`</span>
</span></span></code></pre></div><h3 id=cairo-的核心概念>Cairo 的核心概念</h3><p>理解 Cairo 的绘图模型是掌握它的关键。想象你是一位画家：</p><ul><li><strong>Surface (画布)</strong>：这是你的绘画目标。它可以是一张 PNG 图片 (<code>cairo_image_surface_create</code>)，一个 PDF 文件 (<code>cairo_pdf_surface_create</code>)，或是一个 SVG 图像 (<code>cairo_svg_surface_create</code>)。</li><li><strong>Context (画笔和调色板)</strong>：<code>cairo_t</code> 是你的绘图上下文，它包含了所有绘图的状态，如颜色、线宽、字体等。你所有的绘图操作都是通过它来完成的。</li><li><strong>Path (路径)</strong>：这是你下笔前勾勒的轮廓。路径由直线、曲线和弧线组成。它本身是不可见的，直到你进行下一步操作。</li><li><strong>Source (颜料)</strong>：这是你用来填充或描画路径的“颜料”。它可以是纯色 (<code>cairo_set_source_rgb</code>)、渐变或图案。</li><li><strong>操作 (绘制动作)</strong>：<ul><li><code>cairo_stroke()</code>：描边，沿着路径画出轮廓线。</li><li><code>cairo_fill()</code>：填充，将路径包围的区域填满颜色。</li></ul></li></ul><h3 id=第一个程序绘制基本图形>第一个程序：绘制基本图形</h3><p>让我们从一个简单的例子开始，创建一个PNG图片，并在上面绘制一些基本图形。这个例子将涵盖创建画布、设置画笔、定义路径和渲染的全过程。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=ln> 1</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;cairo/cairo.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;cmath&gt;</span><span class=cp> </span><span class=c1>// For M_PI
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=kt>int</span> <span class=n>width</span> <span class=o>=</span> <span class=mi>600</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=kt>int</span> <span class=n>height</span> <span class=o>=</span> <span class=mi>400</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=c1>// 1. 创建一个图像画布 (Image Surface)
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=c1></span>    <span class=n>cairo_surface_t</span><span class=o>*</span> <span class=n>surface</span> <span class=o>=</span> <span class=n>cairo_image_surface_create</span><span class=p>(</span><span class=n>CAIRO_FORMAT_ARGB32</span><span class=p>,</span> <span class=n>width</span><span class=p>,</span> <span class=n>height</span><span class=p>);</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=c1>// 2. 创建一个绘图上下文 (Context)
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=c1></span>    <span class=n>cairo_t</span><span class=o>*</span> <span class=n>cr</span> <span class=o>=</span> <span class=n>cairo_create</span><span class=p>(</span><span class=n>surface</span><span class=p>);</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=c1>// --- 绘制背景 ---
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=c1></span>    <span class=n>cairo_set_source_rgb</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>0.9</span><span class=p>,</span> <span class=mf>0.9</span><span class=p>,</span> <span class=mf>0.9</span><span class=p>);</span> <span class=c1>// 设置浅灰色
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=c1></span>    <span class=n>cairo_paint</span><span class=p>(</span><span class=n>cr</span><span class=p>);</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=c1>// --- 绘制一个红色描边的矩形 ---
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=c1></span>    <span class=n>cairo_set_source_rgb</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>);</span> <span class=c1>// 红色
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=c1></span>    <span class=n>cairo_set_line_width</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>6.0</span><span class=p>);</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>    <span class=n>cairo_rectangle</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mi>50</span><span class=p>,</span> <span class=mi>50</span><span class=p>,</span> <span class=mi>200</span><span class=p>,</span> <span class=mi>150</span><span class=p>);</span> <span class=c1>// 定义矩形路径 (x, y, w, h)
</span></span></span><span class=line><span class=ln>21</span><span class=cl><span class=c1></span>    <span class=n>cairo_stroke</span><span class=p>(</span><span class=n>cr</span><span class=p>);</span> <span class=c1>// 描边
</span></span></span><span class=line><span class=ln>22</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=c1>// --- 绘制一个蓝色填充的圆形 ---
</span></span></span><span class=line><span class=ln>24</span><span class=cl><span class=c1></span>    <span class=n>cairo_set_source_rgb</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span> <span class=c1>// 蓝色
</span></span></span><span class=line><span class=ln>25</span><span class=cl><span class=c1></span>    <span class=c1>// 定义圆形路径 (cx, cy, radius, start_angle, end_angle)
</span></span></span><span class=line><span class=ln>26</span><span class=cl><span class=c1></span>    <span class=n>cairo_arc</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mi>400</span><span class=p>,</span> <span class=mi>125</span><span class=p>,</span> <span class=mi>75</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>M_PI</span><span class=p>);</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>    <span class=n>cairo_fill</span><span class=p>(</span><span class=n>cr</span><span class=p>);</span> <span class=c1>// 填充
</span></span></span><span class=line><span class=ln>28</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln>29</span><span class=cl>    <span class=c1>// --- 绘制一段绿色曲线 ---
</span></span></span><span class=line><span class=ln>30</span><span class=cl><span class=c1></span>    <span class=n>cairo_set_source_rgb</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>);</span> <span class=c1>// 绿色
</span></span></span><span class=line><span class=ln>31</span><span class=cl><span class=c1></span>    <span class=n>cairo_set_line_width</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>8.0</span><span class=p>);</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>    <span class=n>cairo_move_to</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mi>50</span><span class=p>,</span> <span class=mi>300</span><span class=p>);</span> <span class=c1>// 将画笔移动到起点
</span></span></span><span class=line><span class=ln>33</span><span class=cl><span class=c1></span>    <span class=c1>// 定义贝塞尔曲线 (c1x, c1y, c2x, c2y, endx, endy)
</span></span></span><span class=line><span class=ln>34</span><span class=cl><span class=c1></span>    <span class=n>cairo_curve_to</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mi>150</span><span class=p>,</span> <span class=mi>200</span><span class=p>,</span> <span class=mi>350</span><span class=p>,</span> <span class=mi>400</span><span class=p>,</span> <span class=mi>500</span><span class=p>,</span> <span class=mi>300</span><span class=p>);</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>    <span class=n>cairo_stroke</span><span class=p>(</span><span class=n>cr</span><span class=p>);</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>
</span></span><span class=line><span class=ln>37</span><span class=cl>    <span class=c1>// 3. 将结果保存到PNG文件
</span></span></span><span class=line><span class=ln>38</span><span class=cl><span class=c1></span>    <span class=n>cairo_surface_write_to_png</span><span class=p>(</span><span class=n>surface</span><span class=p>,</span> <span class=s>&#34;basic_shapes.png&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>
</span></span><span class=line><span class=ln>40</span><span class=cl>    <span class=c1>// 4. 清理资源
</span></span></span><span class=line><span class=ln>41</span><span class=cl><span class=c1></span>    <span class=n>cairo_destroy</span><span class=p>(</span><span class=n>cr</span><span class=p>);</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>    <span class=n>cairo_surface_destroy</span><span class=p>(</span><span class=n>surface</span><span class=p>);</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>
</span></span><span class=line><span class=ln>44</span><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln>45</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>编译并运行：</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>g++ main.cpp -o basic_shapes <span class=sb>`</span>pkg-config --cflags --libs cairo<span class=sb>`</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>./basic_shapes
</span></span></code></pre></div><p>你将得到一个名为 <code>basic_shapes.png</code> 的文件，其中包含了我们刚刚绘制的图形。</p><h3 id=进阶技巧>进阶技巧</h3><h4 id=图形变换平移旋转与缩放>图形变换：平移、旋转与缩放</h4><p>Cairo 的一个强大之处在于其坐标变换系统。你可以移动、旋转或缩放整个坐标系，从而轻松地绘制复杂的重复性图案或对齐对象。</p><ul><li><code>cairo_translate(cr, tx, ty)</code>: 将坐标系的原点 (0,0) 移动到 (tx, ty)。</li><li><code>cairo_rotate(cr, angle)</code>: 将坐标系旋转指定的角度（以弧度为单位）。</li><li><code>cairo_scale(cr, sx, sy)</code>: 分别在 x 和 y 轴上缩放坐标系。</li></ul><p>一个重要的实践是使用 <code>cairo_save(cr)</code> 和 <code>cairo_restore(cr)</code> 来包裹变换操作，这就像在 Photoshop 中创建和销毁图层一样，可以确保变换效果不会影响到后续的绘图。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=ln> 1</span><span class=cl><span class=c1>// ... 在之前的代码中添加 ...
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=n>cairo_save</span><span class=p>(</span><span class=n>cr</span><span class=p>);</span> <span class=c1>// 保存当前状态
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=c1>// 将坐标系移到画布中心
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=c1></span><span class=n>cairo_translate</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=n>width</span> <span class=o>/</span> <span class=mf>2.0</span><span class=p>,</span> <span class=n>height</span> <span class=o>/</span> <span class=mf>2.0</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=c1>// 旋转45度
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=c1></span><span class=n>cairo_rotate</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mi>45</span> <span class=o>*</span> <span class=n>M_PI</span> <span class=o>/</span> <span class=mf>180.0</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=c1>// 在旋转后的坐标系中心绘制一个正方形
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=c1></span><span class=n>cairo_set_source_rgba</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>);</span> <span class=c1>// 半透明紫色
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=c1></span><span class=n>cairo_rectangle</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=o>-</span><span class=mi>50</span><span class=p>,</span> <span class=o>-</span><span class=mi>50</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=mi>100</span><span class=p>);</span>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=n>cairo_fill</span><span class=p>(</span><span class=n>cr</span><span class=p>);</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=n>cairo_restore</span><span class=p>(</span><span class=n>cr</span><span class=p>);</span> <span class=c1>// 恢复到保存前的状态
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln>17</span><span class=cl><span class=c1>// ... 继续其他绘图 ...
</span></span></span></code></pre></div><h4 id=渲染文本>渲染文本</h4><p>Cairo 提供了强大的文本渲染功能。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=ln>1</span><span class=cl><span class=c1>// ...
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=c1></span><span class=n>cairo_select_font_face</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=s>&#34;Sans&#34;</span><span class=p>,</span> <span class=n>CAIRO_FONT_SLANT_NORMAL</span><span class=p>,</span> <span class=n>CAIRO_FONT_WEIGHT_BOLD</span><span class=p>);</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=n>cairo_set_font_size</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>50.0</span><span class=p>);</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=n>cairo_set_source_rgb</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>);</span>
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=n>cairo_move_to</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mi>150</span><span class=p>,</span> <span class=mi>250</span><span class=p>);</span>
</span></span><span class=line><span class=ln>6</span><span class=cl><span class=n>cairo_show_text</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=s>&#34;Hello, Cairo!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>7</span><span class=cl><span class=c1>// ...
</span></span></span></code></pre></div><h3 id=实际应用示例绘制一个简单的房子场景>实际应用示例：绘制一个简单的房子场景</h3><p>让我们把学到的知识结合起来，绘制一个包含房子、太阳和文字的场景。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=ln> 1</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;cairo/cairo.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;cmath&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=cp></span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=n>cairo_surface_t</span><span class=o>*</span> <span class=n>surface</span> <span class=o>=</span> <span class=n>cairo_image_surface_create</span><span class=p>(</span><span class=n>CAIRO_FORMAT_ARGB32</span><span class=p>,</span> <span class=mi>600</span><span class=p>,</span> <span class=mi>400</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=n>cairo_t</span><span class=o>*</span> <span class=n>cr</span> <span class=o>=</span> <span class=n>cairo_create</span><span class=p>(</span><span class=n>surface</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=c1>// 背景
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=c1></span>    <span class=n>cairo_set_source_rgb</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>0.8</span><span class=p>,</span> <span class=mf>0.9</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span> <span class=c1>// 淡蓝色天空
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=c1></span>    <span class=n>cairo_paint</span><span class=p>(</span><span class=n>cr</span><span class=p>);</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=c1>// 太阳
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=c1></span>    <span class=n>cairo_set_source_rgb</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>,</span> <span class=mf>0.9</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>);</span> <span class=c1>// 黄色
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=c1></span>    <span class=n>cairo_arc</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mi>500</span><span class=p>,</span> <span class=mi>80</span><span class=p>,</span> <span class=mi>50</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>M_PI</span><span class=p>);</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>    <span class=n>cairo_fill</span><span class=p>(</span><span class=n>cr</span><span class=p>);</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=c1>// 房子主体
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=c1></span>    <span class=n>cairo_set_source_rgb</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>0.8</span><span class=p>,</span> <span class=mf>0.7</span><span class=p>,</span> <span class=mf>0.6</span><span class=p>);</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>    <span class=n>cairo_rectangle</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=mi>200</span><span class=p>,</span> <span class=mi>200</span><span class=p>,</span> <span class=mi>150</span><span class=p>);</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>    <span class=n>cairo_fill_preserve</span><span class=p>(</span><span class=n>cr</span><span class=p>);</span> <span class=c1>// 填充并保留路径用于描边
</span></span></span><span class=line><span class=ln>21</span><span class=cl><span class=c1></span>    <span class=n>cairo_set_source_rgb</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>);</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>    <span class=n>cairo_set_line_width</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>4.0</span><span class=p>);</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=n>cairo_stroke</span><span class=p>(</span><span class=n>cr</span><span class=p>);</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>
</span></span><span class=line><span class=ln>25</span><span class=cl>    <span class=c1>// 房顶
</span></span></span><span class=line><span class=ln>26</span><span class=cl><span class=c1></span>    <span class=n>cairo_move_to</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mi>80</span><span class=p>,</span> <span class=mi>200</span><span class=p>);</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>    <span class=n>cairo_line_to</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mi>200</span><span class=p>,</span> <span class=mi>120</span><span class=p>);</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>    <span class=n>cairo_line_to</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mi>320</span><span class=p>,</span> <span class=mi>200</span><span class=p>);</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>    <span class=n>cairo_close_path</span><span class=p>(</span><span class=n>cr</span><span class=p>);</span> <span class=c1>// 闭合路径形成三角形
</span></span></span><span class=line><span class=ln>30</span><span class=cl><span class=c1></span>    <span class=n>cairo_set_source_rgb</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>0.9</span><span class=p>,</span> <span class=mf>0.3</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>);</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>    <span class=n>cairo_fill_preserve</span><span class=p>(</span><span class=n>cr</span><span class=p>);</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>    <span class=n>cairo_set_source_rgb</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>);</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>    <span class=n>cairo_stroke</span><span class=p>(</span><span class=n>cr</span><span class=p>);</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>
</span></span><span class=line><span class=ln>35</span><span class=cl>    <span class=c1>// 门
</span></span></span><span class=line><span class=ln>36</span><span class=cl><span class=c1></span>    <span class=n>cairo_rectangle</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mi>180</span><span class=p>,</span> <span class=mi>280</span><span class=p>,</span> <span class=mi>40</span><span class=p>,</span> <span class=mi>70</span><span class=p>);</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>    <span class=n>cairo_set_source_rgb</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>,</span> <span class=mf>0.3</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>);</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>    <span class=n>cairo_fill</span><span class=p>(</span><span class=n>cr</span><span class=p>);</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>
</span></span><span class=line><span class=ln>40</span><span class=cl>    <span class=c1>// 欢迎语
</span></span></span><span class=line><span class=ln>41</span><span class=cl><span class=c1></span>    <span class=n>cairo_select_font_face</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=s>&#34;Georgia&#34;</span><span class=p>,</span> <span class=n>CAIRO_FONT_SLANT_ITALIC</span><span class=p>,</span> <span class=n>CAIRO_FONT_WEIGHT_NORMAL</span><span class=p>);</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>    <span class=n>cairo_set_font_size</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>24.0</span><span class=p>);</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>    <span class=n>cairo_set_source_rgb</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>);</span>
</span></span><span class=line><span class=ln>44</span><span class=cl>    <span class=n>cairo_move_to</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=mi>120</span><span class=p>,</span> <span class=mi>380</span><span class=p>);</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>    <span class=n>cairo_show_text</span><span class=p>(</span><span class=n>cr</span><span class=p>,</span> <span class=s>&#34;Welcome to Cairo!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>
</span></span><span class=line><span class=ln>47</span><span class=cl>    <span class=c1>// 保存并清理
</span></span></span><span class=line><span class=ln>48</span><span class=cl><span class=c1></span>    <span class=n>cairo_surface_write_to_png</span><span class=p>(</span><span class=n>surface</span><span class=p>,</span> <span class=s>&#34;house_scene.png&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>    <span class=n>cairo_destroy</span><span class=p>(</span><span class=n>cr</span><span class=p>);</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>    <span class=n>cairo_surface_destroy</span><span class=p>(</span><span class=n>surface</span><span class=p>);</span>
</span></span><span class=line><span class=ln>51</span><span class=cl>
</span></span><span class=line><span class=ln>52</span><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln>53</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=结论与后续学习>结论与后续学习</h3><p>通过本教程，你已经掌握了使用 Cairo 进行 2D 矢量绘图的基本流程。Cairo 的强大远不止于此，你可以进一步探索：</p><ul><li><strong>渐变与图案</strong>：创建更丰富的视觉效果。</li><li><strong>高级路径操作</strong>：如 <code>cairo_clip</code>，用于创建遮罩效果。</li><li><strong>不同的 Surface</strong>：尝试将你的绘图输出为 PDF (<code>cairo_pdf_surface_create</code>) 或 SVG (<code>cairo_svg_surface_create</code>)。</li><li><strong>交互式应用</strong>：将 Cairo 与 GTK、Qt 或其他 GUI 框架结合，创建带有动态图形的桌面应用。</li></ul><p>要深入学习，最好的资源永远是<strong>官方文档</strong>和<strong>示例</strong>。现在，开始你的创作之旅吧！</p></main><br><footer><div class=footer-info><p>Copyright &copy; 2025 Rainboy. All rights reserved.
<span>| Last build: 2025-10-22 14:30:46</span></p></div><script defer>document.addEventListener("keydown",function(e){if(document.activeElement.isContentEditable)return!1;if(document.activeElement.tagName=="INPUT")return!1;if(e.altKey||e.ctrlKey||e.shiftKey)return!1;var t=e.key;if(t==="h")e.preventDefault(),e.stopPropagation(),window.location.href="/";else if(t==="t")e.preventDefault(),e.stopPropagation(),window.location.href=`https://${location.hostname}/tags`;else if(t==="i"){e.preventDefault(),e.stopPropagation();const t=document.querySelectorAll("input");for(let e=0;e<t.length;e++)if(t[e].offsetParent!==null){t[e].selectionStart=t[e].selectionEnd=t[e].value.length,t[e].focus();break}}return!1})</script><script defer>function throttle(e,t){var n=Date.now();return function(){var s=Date.now();n+t-s<0&&(e(),n=s)}}function scrollHandler(){const e=Array.from(document.querySelectorAll("body h2, body h3"));function t(){for(var n,s,o,i=window.pageYOffset||document.documentElement.scrollTop,t=0;t<e.length;t++)s=e[t].getAttribute("id"),n=document.querySelector('nav ul li a[href="#'+s+'"]'),n&&n.classList.remove("active-toc");for(t=e.length-1;t>=0;t--)if(o=e[t].offsetTop,i>o-75&&(s=e[t].getAttribute("id"),n=document.querySelector('nav ul li a[href="#'+s+'"]'),n)){n.classList.add("active-toc");break}}window.addEventListener("scroll",throttle(t,200))}setTimeout(scrollHandler,100)</script><script defer>function addCopyButtonToCodeBlocks(){const e=document.querySelectorAll('code[class^="language-"]:not(.output):not([class*="language-console"])');e.forEach(e=>{const t=document.createElement("button");t.classList.add("copy-code-button"),t.innerHTML="copy",t.addEventListener("click",()=>{const s=e.querySelectorAll(".cl");let n="";s.forEach(e=>{n+=e.innerText}),navigator.clipboard.writeText(n),t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},1500)}),e.parentNode.before(t)})}setTimeout(function(){addCopyButtonToCodeBlocks()},100)</script><script defer src=/js/theme-switcher.js></script></footer></body></html>