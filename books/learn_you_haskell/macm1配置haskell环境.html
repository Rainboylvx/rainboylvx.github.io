<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=cache-control content="max-age=0"><meta http-equiv=cache-control content="no-cache"><meta http-equiv=expires content="0"><meta http-equiv=expires content="Tue, 01 Jan 1980 1:00:00 GMT"><meta http-equiv=pragma content="no-cache"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png }><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#1b1b1b"><meta name=description content="macM1é…ç½®haskellç¯å¢ƒ"><script>(function(){const e=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");document.documentElement.setAttribute("data-theme",e)})()</script><title>macM1é…ç½®haskellç¯å¢ƒ | Rainboy's Blog</title><style>:root{--background:#ffffff}@media(prefers-color-scheme:dark){:root{--background:#1b1b1b}}html{background-color:var(--background)}body{background-color:var(--background)}</style><link rel=stylesheet type=text/css href=/style.min.4de9e3236bcb55312d0b2ff0fc62c694f607b9c0d95d0621f6c6dbacb7d6dbb5.css media=all><link rel=stylesheet href=/grid.css><link href="https://fonts.font.im/css?family=Roboto+Mono" rel=stylesheet><style>body,.heti,.heti--sans{font-family:roboto mono,monospace,times new roman,times,heti song,serif,apple color emoji,segoe ui emoji,segoe ui symbol}</style></head><body><nav><ul class=menu><li><a tabindex=-1 class=menu-link href=/><u>H</u>ome</a></li><li><a tabindex=-1 class=menu-link href=/tags><u>T</u>ags</a></li><li><span style=cursor:pointer id=theme-switcher class=menu-link type=button><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon h-4 w-4"><path d="M12 3a6 6 0 009 9 9 9 0 11-9-9z"/></svg></span></li></ul></nav><div id=single-header><h1>macM1é…ç½®haskellç¯å¢ƒ</h1><div id=single-meta><span class=datesub>2025-09-11 00:00</span>
<span id=tags>&nbsp;&nbsp;
<span><a href=https://hugo-dead-simple.netlify.com/tags/ai.html>#ai</a>
</span>&nbsp;</span></div></div><aside class="hidden lg:block toc" id=tableOfContentContainer><nav id=TableOfContents><ul><li><ul><li><a href=#-m1-mac--vs-code--haskell-ç¯å¢ƒé…ç½®æŒ‡å—>ğŸ› ï¸ M1 Mac + VS Code + Haskell ç¯å¢ƒé…ç½®æŒ‡å—</a></li><li><a href=#æ­¥éª¤-1å®‰è£…-haskell-å·¥å…·é“¾-ghcup>æ­¥éª¤ 1ï¼šå®‰è£… Haskell å·¥å…·é“¾ (GHCup)</a></li><li><a href=#æ­¥éª¤-2é…ç½®-vs-code-æ‰©å±•>æ­¥éª¤ 2ï¼šé…ç½® VS Code æ‰©å±•</a></li><li><a href=#æ­¥éª¤-3éªŒè¯ä¸åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªé¡¹ç›®-ä½¿ç”¨-cabal>æ­¥éª¤ 3ï¼šéªŒè¯ä¸åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªé¡¹ç›® (ä½¿ç”¨ Cabal)</a></li><li><a href=#-é‡ç‚¹æ€»ç»“ä¸å»ºè®®>ğŸ’¡ é‡ç‚¹æ€»ç»“ä¸å»ºè®®</a></li></ul></li></ul></nav></aside><main class="heti heti--classic"><p>åœ¨ M1 èŠ¯ç‰‡çš„ Mac ä¸Šé…ç½® Haskell + VS Code ç¯å¢ƒç°åœ¨å·²ç»éå¸¸é¡ºç•…ã€‚Apple Silicon (M1/M2/M3) å¾—åˆ°äº†å¾ˆå¥½çš„æ”¯æŒã€‚</p><p>è¿™ç¯‡æŒ‡å—ä¼šå¸¦ä½ èµ°è¿‡æœ€ä½³å®è·µçš„è·¯å¾„ï¼Œä½¿ç”¨ <code>GHCup</code> æ¥ç®¡ç†å·¥å…·é“¾ï¼Œå¹¶ä½¿ç”¨ <code>Haskell Language Server (HLS)</code> æ¥é©±åŠ¨ VS Code è·å¾—æ™ºèƒ½æç¤ºã€‚</p><hr><h3 id=-m1-mac--vs-code--haskell-ç¯å¢ƒé…ç½®æŒ‡å—>ğŸ› ï¸ M1 Mac + VS Code + Haskell ç¯å¢ƒé…ç½®æŒ‡å—</h3><p>è¿™æ˜¯ä¸€ä¸ªä¸‰æ­¥èµ°çš„è¿‡ç¨‹ï¼š</p><ol><li><strong>å®‰è£… GHCup</strong>ï¼šè¿™æ˜¯ç›®å‰æ¨èçš„ Haskell å·¥å…·é“¾ç®¡ç†å™¨ï¼ˆç±»ä¼¼äº Rust çš„ <code>rustup</code> æˆ– Node.js çš„ <code>nvm</code>ï¼‰ã€‚å®ƒä¼šä¸ºä½ å®‰è£…æ‰€æœ‰æ ¸å¿ƒç»„ä»¶ã€‚</li><li><strong>é…ç½® VS Code</strong>ï¼šå®‰è£…å®˜æ–¹çš„ Haskell æ‰©å±•ã€‚</li><li><strong>éªŒè¯ä¸åˆ›å»ºé¡¹ç›®</strong>ï¼šåˆ›å»ºä¸€ä¸ª &ldquo;Hello, World&rdquo; é¡¹ç›®æ¥ç¡®ä¿ä¸€åˆ‡æ­£å¸¸å·¥ä½œã€‚</li></ol><hr><h3 id=æ­¥éª¤-1å®‰è£…-haskell-å·¥å…·é“¾-ghcup>æ­¥éª¤ 1ï¼šå®‰è£… Haskell å·¥å…·é“¾ (GHCup)</h3><p><code>GHCup</code> æ˜¯å…³é”®ã€‚å®ƒä¼šä¸ºä½ ç®¡ç†å’Œå®‰è£…ï¼š</p><ul><li><strong>GHC</strong>ï¼šHaskell çš„ç¼–è¯‘å™¨ã€‚</li><li><strong>Cabal</strong>ï¼šHaskell çš„æ ‡å‡†æ„å»ºå·¥å…·å’ŒåŒ…ç®¡ç†å™¨ã€‚</li><li><strong>HLS</strong> (Haskell Language Server)ï¼šVS Code èµ–ä»¥å®ç°æ™ºèƒ½æç¤ºã€é”™è¯¯æ£€æŸ¥å’Œä»£ç è·³è½¬çš„â€œå¤§è„‘â€ã€‚</li><li><strong>Stack</strong>ï¼ˆå¯é€‰ï¼‰ï¼šå¦ä¸€ä¸ªæµè¡Œçš„æ„å»ºå·¥å…·ã€‚</li></ul><h4 id=11-å®‰è£…-ghcup>1.1. å®‰è£… GHCup</h4><p>æ‰“å¼€ä½ çš„ç»ˆç«¯ (Terminal)ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>curl --proto <span class=s1>&#39;=https&#39;</span> --tlsv1.2 -sSf https://get-ghcup.haskell.org <span class=p>|</span> sh
</span></span></code></pre></div><h4 id=12-éµå¾ª-ghcup-æç¤º>1.2. éµå¾ª GHCup æç¤º</h4><p>å®‰è£…è„šæœ¬ä¼šå¼•å¯¼ä½ å®Œæˆå‡ ä¸ªè®¾ç½®ï¼š</p><ul><li>å½“å®ƒè¯¢é—®æ˜¯å¦å®‰è£… <code>ghc</code>, <code>cabal</code>, <code>hls</code> å’Œ <code>stack</code> æ—¶ï¼Œ**å…¨éƒ¨é€‰æ‹© Yes (æŒ‰å›è½¦é”® &lsquo;Enter&rsquo; é»˜è®¤) **ã€‚</li><li>å®ƒå¯èƒ½ä¼šè¯¢é—®æ˜¯å¦å°† <code>~/.ghcup/bin</code> æ·»åŠ åˆ°ä½ çš„ <code>PATH</code> ç¯å¢ƒå˜é‡ä¸­ã€‚é€‰æ‹© Yesã€‚</li><li>å®ƒå¯èƒ½ä¼šè¯¢é—®æ˜¯å¦å®‰è£… <code>stack</code>ã€‚å»ºè®®é€‰æ‹© Yesï¼Œå³ä½¿ä½ åˆšå¼€å§‹ä¸»è¦ç”¨ Cabalã€‚</li></ul><h4 id=13-é‡å¯ç»ˆç«¯æˆ–æ¿€æ´»ç¯å¢ƒ>1.3. é‡å¯ç»ˆç«¯æˆ–æ¿€æ´»ç¯å¢ƒ</h4><p>å®‰è£…å®Œæˆåï¼Œ<strong>å®Œå…¨å…³é—­å¹¶é‡æ–°æ‰“å¼€ä½ çš„ç»ˆç«¯</strong>ï¼Œä»¥ç¡®ä¿æ–°çš„ <code>PATH</code> ç”Ÿæ•ˆã€‚</p><p>æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥è¿è¡Œ <code>source "$HOME/.ghcup/env"</code> æ¥ç«‹å³æ¿€æ´»ã€‚</p><h4 id=14-éªŒè¯å®‰è£…>1.4. éªŒè¯å®‰è£…</h4><p>åœ¨æ–°çš„ç»ˆç«¯çª—å£ä¸­ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥ç‰ˆæœ¬ã€‚ä½ åº”è¯¥èƒ½çœ‹åˆ°å®ƒä»¬å„è‡ªçš„ç‰ˆæœ¬å·ï¼Œè€Œä¸æ˜¯ &ldquo;command not found&rdquo;ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>ghc --version
</span></span><span class=line><span class=ln>2</span><span class=cl>cabal --version
</span></span><span class=line><span class=ln>3</span><span class=cl>hls --version
</span></span></code></pre></div><blockquote><p><strong>æ³¨æ„</strong>ï¼š<code>ghcup</code> ä¼šè‡ªåŠ¨ä¸ºä½ å®‰è£… M1 èŠ¯ç‰‡åŸç”Ÿ (aarch64) çš„ç‰ˆæœ¬ï¼Œä½ ä¸éœ€è¦æ‹…å¿ƒ Rosetta 2 çš„è½¬è¯‘ã€‚</p></blockquote><hr><h3 id=æ­¥éª¤-2é…ç½®-vs-code-æ‰©å±•>æ­¥éª¤ 2ï¼šé…ç½® VS Code æ‰©å±•</h3><p>è¿™æ˜¯æœ€ç®€å•çš„ä¸€æ­¥ã€‚<code>GHCup</code> å·²ç»æŠŠå›°éš¾çš„éƒ¨åˆ† (HLS) å¤„ç†å¥½äº†ã€‚</p><ol><li>æ‰“å¼€ VS Codeã€‚</li><li>è½¬åˆ° <strong>Extensions</strong> è§†å›¾ (å¿«æ·é”® <code>â‡§âŒ˜X</code>)ã€‚</li><li>æœç´¢ &ldquo;Haskell&rdquo;ã€‚</li><li>å®‰è£…ç”± <strong>Haskell</strong> å›¢é˜Ÿå‘å¸ƒçš„å®˜æ–¹æ‰©å±•ï¼ˆå®ƒå°±å« &ldquo;Haskell&rdquo;ï¼‰ã€‚</li></ol><p>å®‰è£…å®Œæˆåï¼Œè¿™ä¸ªæ‰©å±•ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°ä½ é€šè¿‡ <code>ghcup</code> å®‰è£…çš„ <code>hls</code>ã€‚</p><hr><h3 id=æ­¥éª¤-3éªŒè¯ä¸åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªé¡¹ç›®-ä½¿ç”¨-cabal>æ­¥éª¤ 3ï¼šéªŒè¯ä¸åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªé¡¹ç›® (ä½¿ç”¨ Cabal)</h3><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªç®€å•çš„é¡¹ç›®ï¼Œå¹¶åœ¨ VS Code ä¸­æ‰“å¼€å®ƒï¼Œä»¥ç¡®ä¿ HLS æ­£å¸¸å¯åŠ¨ã€‚</p><h4 id=31-åˆ›å»ºé¡¹ç›®>3.1. åˆ›å»ºé¡¹ç›®</h4><p>åœ¨ä½ çš„ç»ˆç«¯é‡Œï¼Œè¿è¡Œï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=c1># 1. åˆ›å»ºä¸€ä¸ªæ–°ç›®å½•å¹¶è¿›å…¥</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>mkdir hello-haskell
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=nb>cd</span> hello-haskell
</span></span><span class=line><span class=ln>4</span><span class=cl>
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=c1># 2. ä½¿ç”¨ cabal åˆå§‹åŒ–ä¸€ä¸ªæ–°é¡¹ç›®</span>
</span></span><span class=line><span class=ln>6</span><span class=cl><span class=c1># -n (non-interactive) é€‰é¡¹ä¼šä½¿ç”¨é»˜è®¤è®¾ç½®è·³è¿‡æ‰€æœ‰é—®é¢˜</span>
</span></span><span class=line><span class=ln>7</span><span class=cl>cabal init -n
</span></span></code></pre></div><p>è¿™ä¼šåˆ›å»ºå‡ ä¸ªæ–‡ä»¶ï¼Œæœ€é‡è¦çš„æ˜¯ï¼š</p><ul><li><code>hello-haskell.cabal</code>ï¼šé¡¹ç›®é…ç½®æ–‡ä»¶ï¼ˆç±»ä¼¼ <code>package.json</code>ï¼‰ã€‚</li><li><code>app/Main.hs</code>ï¼šä½ çš„ä¸»ç¨‹åºå…¥å£ã€‚</li></ul><h4 id=32-åœ¨-vs-code-ä¸­æ‰“å¼€>3.2. åœ¨ VS Code ä¸­æ‰“å¼€</h4><p>åœ¨ <code>hello-haskell</code> ç›®å½•ä¸­ï¼Œè¿è¡Œï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>code .
</span></span></code></pre></div><blockquote><p><code>code .</code> å‘½ä»¤ä¼šä½¿ç”¨ VS Code æ‰“å¼€å½“å‰ç›®å½•ã€‚</p></blockquote><h4 id=33-è§‚å¯Ÿ-hls-å¯åŠ¨>3.3. è§‚å¯Ÿ HLS å¯åŠ¨</h4><p>å½“ä½ æ‰“å¼€é¡¹ç›®ï¼ˆç‰¹åˆ«æ˜¯ <code>app/Main.hs</code> æ–‡ä»¶ï¼‰æ—¶ï¼Œè¯·æ³¨æ„ VS Code çš„åº•éƒ¨çŠ¶æ€æ ã€‚</p><p>ä½ å¯èƒ½ä¼šçœ‹åˆ° &ldquo;HLS: Initializing&mldr;&rdquo; æˆ– &ldquo;HLS: Building&mldr;&rdquo; ä¹‹ç±»çš„æ¶ˆæ¯ã€‚è¿™è¡¨ç¤º Haskell Language Server æ­£åœ¨åˆ†æä½ çš„é¡¹ç›®ä¾èµ–ã€‚ç¬¬ä¸€æ¬¡å¯åŠ¨å¯èƒ½ä¼šèŠ±ä¸€ä¸¤åˆ†é’Ÿã€‚</p><p><strong>å¯åŠ¨æˆåŠŸå</strong>ï¼Œä½ å°†è·å¾—ï¼š</p><ul><li>ä»£ç é«˜äº®</li><li>å°†é¼ æ ‡æ‚¬åœåœ¨å‡½æ•°ä¸Šæ—¶çš„ç±»å‹æç¤º</li><li>å®æ—¶é”™è¯¯æ£€æŸ¥ï¼ˆå¦‚æœä½ æ•…æ„å†™é”™ä»£ç ï¼‰</li></ul><h4 id=34-è¿è¡Œä½ çš„é¡¹ç›®>3.4. è¿è¡Œä½ çš„é¡¹ç›®</h4><p>å›åˆ°ä½ çš„ VS Code <strong>é›†æˆç»ˆç«¯</strong> (å¿«æ·é”® <code>âŒƒ</code> + <code></code>` )ã€‚</p><p>è¿è¡Œï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>cabal run
</span></span></code></pre></div><p>Cabal ä¼šç¼–è¯‘ä½ çš„é¡¹ç›®å¹¶æ‰§è¡Œå®ƒã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ° <code>app/Main.hs</code> æ–‡ä»¶ä¸­é»˜è®¤çš„ &ldquo;Hello, world!&rdquo; è¾“å‡ºã€‚</p><hr><h3 id=-é‡ç‚¹æ€»ç»“ä¸å»ºè®®>ğŸ’¡ é‡ç‚¹æ€»ç»“ä¸å»ºè®®</h3><ul><li><strong>GHCup æ˜¯æ ¸å¿ƒ</strong>ï¼šå¦‚æœä½ éœ€è¦æ›´æ–° GHC æˆ– HLSï¼Œè¯·ä½¿ç”¨ <code>ghcup</code> (ä¾‹å¦‚ <code>ghcup install hls 1.10.0.0</code> æˆ–ä½¿ç”¨ <code>ghcup tui</code> è¿›å…¥å›¾å½¢åŒ–ç®¡ç†ç•Œé¢)ã€‚</li><li><strong>HLS æ˜¯ VS Code çš„å¤§è„‘</strong>ï¼šå¦‚æœ VS Code çœ‹èµ·æ¥â€œæ²¡æœ‰ååº”â€ï¼ˆæ²¡æœ‰æ™ºèƒ½æç¤ºï¼‰ï¼Œé€šå¸¸æ„å‘³ç€ HLS é‡åˆ°äº†é—®é¢˜ã€‚æ£€æŸ¥ VS Code åº•éƒ¨çŠ¶æ€æ çš„ HLS å›¾æ ‡ï¼Œæˆ–è€…åœ¨è¾“å‡ºé¢æ¿ (Output) ä¸­æŸ¥çœ‹ &ldquo;Haskell Language Server&rdquo; çš„æ—¥å¿—ã€‚</li><li><strong>Cabal vs. Stack</strong>ï¼š<code>ghcup</code> å¸®ä½ åŒæ—¶å®‰è£…äº† <code>cabal</code> å’Œ <code>stack</code>ã€‚å®ƒä»¬éƒ½æ˜¯æ„å»ºå·¥å…·ã€‚å¯¹äºåˆå­¦è€…ï¼Œ<code>cabal</code> å·²ç»è¶³å¤Ÿä¼˜ç§€ä¸”æ˜¯æ ‡å‡†ã€‚ä½ æš‚æ—¶ä¸éœ€è¦æ‹…å¿ƒ <code>stack</code>ã€‚</li></ul><p>ä½ ç°åœ¨å·²ç»æ‹¥æœ‰ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„ Haskell å¼€å‘ç¯å¢ƒäº†ï¼</p></main><br><footer><div class=footer-info><p>Copyright &copy; 2025 Rainboy. All rights reserved.
<span>| Last build: 2025-11-09 23:21:35</span></p></div><script defer>document.addEventListener("keydown",function(e){if(document.activeElement.isContentEditable)return!1;if(document.activeElement.tagName=="INPUT")return!1;if(e.altKey||e.ctrlKey||e.shiftKey)return!1;var t=e.key;if(t==="h")e.preventDefault(),e.stopPropagation(),window.location.href="/";else if(t==="t")e.preventDefault(),e.stopPropagation(),window.location.href=`https://${location.hostname}/tags`;else if(t==="i"){e.preventDefault(),e.stopPropagation();const t=document.querySelectorAll("input");for(let e=0;e<t.length;e++)if(t[e].offsetParent!==null){t[e].selectionStart=t[e].selectionEnd=t[e].value.length,t[e].focus();break}}return!1})</script><script defer>function throttle(e,t){var n=Date.now();return function(){var s=Date.now();n+t-s<0&&(e(),n=s)}}function scrollHandler(){const e=Array.from(document.querySelectorAll("body h2, body h3"));function t(){for(var n,s,o,i=window.pageYOffset||document.documentElement.scrollTop,t=0;t<e.length;t++)s=e[t].getAttribute("id"),n=document.querySelector('nav ul li a[href="#'+s+'"]'),n&&n.classList.remove("active-toc");for(t=e.length-1;t>=0;t--)if(o=e[t].offsetTop,i>o-75&&(s=e[t].getAttribute("id"),n=document.querySelector('nav ul li a[href="#'+s+'"]'),n)){n.classList.add("active-toc");break}}window.addEventListener("scroll",throttle(t,200))}setTimeout(scrollHandler,100)</script><script defer>function addCopyButtonToCodeBlocks(){const e=document.querySelectorAll('code[class^="language-"]:not(.output):not([class*="language-console"])');e.forEach(e=>{const t=document.createElement("button");t.classList.add("copy-code-button"),t.innerHTML="copy",t.addEventListener("click",()=>{const s=e.querySelectorAll(".cl");let n="";s.forEach(e=>{n+=e.innerText}),navigator.clipboard.writeText(n),t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},1500)}),e.parentNode.before(t)})}setTimeout(function(){addCopyButtonToCodeBlocks()},100)</script><script defer src=/js/theme-switcher.js></script></footer></body></html>